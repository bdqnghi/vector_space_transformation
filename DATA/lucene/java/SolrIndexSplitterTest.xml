org.apache.solr.update java.io.File import java.io.UnsupportedEncodingException import java.lang.invoke.MethodHandles import java.nio.charset.StandardCharsets import java.util.List import com.google.common.collect.ImmutableMap import com.google.common.collect.Lists import org.apache.lucene.index.DirectoryReader import org.apache.lucene.index.Term import org.apache.lucene.store.Directory import org.apache.solr.SolrTestCaseJ4 import org.apache.solr.client.solrj.SolrQuery import org.apache.solr.client.solrj.embedded.EmbeddedSolrServer import org.apache.solr.common.cloud.CompositeIdRouter import org.apache.solr.common.cloud.DocRouter import org.apache.solr.common.cloud.PlainIdRouter import org.apache.solr.common.util.Hash import org.apache.solr.core.DirectoryFactory import org.apache.solr.core.SolrCore import org.apache.solr.request.LocalSolrQueryRequest import org.junit.Before import org.junit.BeforeClass import org.junit.Test import org.slf4j.Logger import org.slf4j.LoggerFactory import class org.apache.solr.update.SolrIndexSplitterTest super super extends File Logger public static public static throws public public throws = = = LocalSolrQueryRequest String String decl List SplitIndexCommand DirectoryReader Directory public public throws decl_stmt org.apache.solr.request.LocalSolrQueryRequest = try decl_stmt java.lang.String = decl_stmt java.lang.String = decl_stmt java.util.List < = = decl_stmt org.apache.solr.update.SplitIndexCommand = new call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() new new decl_stmt org.apache.lucene.store.Directory = call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() decl_stmt org.apache.lucene.index.DirectoryReader = call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() new call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() new call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() = = call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() new call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() new call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() finally if != call LocalSolrQueryRequest.close() call LocalSolrQueryRequest.close() call LocalSolrQueryRequest.close() call LocalSolrQueryRequest.close() call LocalSolrQueryRequest.close() LocalSolrQueryRequest String String decl List SplitIndexCommand DirectoryReader Directory public public throws decl_stmt org.apache.solr.request.LocalSolrQueryRequest = try decl_stmt java.lang.String = decl_stmt java.lang.String = decl_stmt java.util.List < = = decl_stmt org.apache.solr.update.SplitIndexCommand = new call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() new new decl_stmt org.apache.lucene.store.Directory = call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() decl_stmt org.apache.lucene.index.DirectoryReader = call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() new call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() call DirectoryReader.docFreq() new call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() = = call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() finally if != call LocalSolrQueryRequest.close() call LocalSolrQueryRequest.close() call LocalSolrQueryRequest.close() call LocalSolrQueryRequest.close() call LocalSolrQueryRequest.close() SplitIndexCommand String EmbeddedSolrServer String decl List EmbeddedSolrServer LocalSolrQueryRequest SolrCore public public throws decl_stmt java.lang.String = decl_stmt java.lang.String = decl_stmt java.util.List < = decl_stmt org.apache.solr.core.SolrCore = = try = call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() = decl_stmt org.apache.solr.request.LocalSolrQueryRequest = try = decl_stmt org.apache.solr.update.SplitIndexCommand = new new new finally if != call SplitIndexCommand.close() call SplitIndexCommand.close() call SplitIndexCommand.close() call SplitIndexCommand.close() call SplitIndexCommand.close() decl_stmt org.apache.solr.client.solrj.embedded.EmbeddedSolrServer = new decl_stmt org.apache.solr.client.solrj.embedded.EmbeddedSolrServer = new call EmbeddedSolrServer.commit() call EmbeddedSolrServer.commit() call EmbeddedSolrServer.commit() call EmbeddedSolrServer.commit() call EmbeddedSolrServer.commit() call EmbeddedSolrServer.query() call EmbeddedSolrServer.query() call EmbeddedSolrServer.query() call EmbeddedSolrServer.query() call EmbeddedSolrServer.query() new call EmbeddedSolrServer.query() call EmbeddedSolrServer.query() call EmbeddedSolrServer.query() call EmbeddedSolrServer.query() call EmbeddedSolrServer.query() new new new finally Directory int LocalSolrQueryRequest SplitIndexCommand DirectoryReader public public throws decl_stmt org.apache.solr.request.LocalSolrQueryRequest = decl_stmt org.apache.lucene.store.Directory = try decl_stmt int = + * call java.util.logging.Logger.info(String) call java.util.logging.Logger.info(String) call java.util.logging.Logger.info(String) call java.util.logging.Logger.info(String) call java.util.logging.Logger.info(String) for = < ++ = decl_stmt org.apache.solr.update.SplitIndexCommand = new call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() new new = call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() decl_stmt org.apache.lucene.index.DirectoryReader = / call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() = = / call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() = = / call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() = finally if != call LocalSolrQueryRequest.close() call LocalSolrQueryRequest.close() call LocalSolrQueryRequest.close() call LocalSolrQueryRequest.close() call LocalSolrQueryRequest.close() if != decl DocRouter CompositeIdRouter String SplitIndexCommand decl Range String Directory File LocalSolrQueryRequest public public throws decl_stmt File = decl_stmt org.apache.solr.common.cloud.CompositeIdRouter = new decl_stmt java.lang.String = decl_stmt java.lang.String = call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) for = < ++ + + decl_stmt org.apache.lucene.facet.range.Range = call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) call org.apache.solr.common.cloud.CompositeIdRouter.keyHashRange(String) decl_stmt org.apache.solr.request.LocalSolrQueryRequest = decl_stmt org.apache.lucene.store.Directory = try = decl_stmt org.apache.solr.update.SplitIndexCommand = new call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() new new = call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() decl_stmt org.apache.lucene.index.DirectoryReader = call SplitIndexCommand.numDocs() call SplitIndexCommand.numDocs() call SplitIndexCommand.numDocs() call SplitIndexCommand.numDocs() call SplitIndexCommand.numDocs() call SplitIndexCommand.close() call SplitIndexCommand.close() call SplitIndexCommand.close() call SplitIndexCommand.close() call SplitIndexCommand.close() = finally if != call decl Range.close() call decl Range.close() call decl Range.close() call decl Range.close() call decl Range.close() if != int int decl byte int PlainIdRouter decl DocRouter private < private < throws decl_stmt byte = decl_stmt int = = decl_stmt int = if > decl_stmt int = = = decl_stmt PlainIdRouter = new decl_stmt org.apache.lucene.facet.range.Range = new return call PlainIdRouter.partitionRange() call PlainIdRouter.partitionRange() call PlainIdRouter.partitionRange() call PlainIdRouter.partitionRange() call PlainIdRouter.partitionRange()