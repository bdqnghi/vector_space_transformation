org.apache.lucene.facet java.util.List import java.util.Random import org.apache.lucene.document.Document import org.apache.lucene.document.Field.Store import org.apache.lucene.document.StringField import org.apache.lucene.facet.FacetsCollector.MatchingDocs import org.apache.lucene.facet.taxonomy.FastTaxonomyFacetCounts import org.apache.lucene.facet.taxonomy.TaxonomyReader import org.apache.lucene.facet.taxonomy.directory.DirectoryTaxonomyReader import org.apache.lucene.facet.taxonomy.directory.DirectoryTaxonomyWriter import org.apache.lucene.index.RandomIndexWriter import org.apache.lucene.index.Term import org.apache.lucene.search.DocIdSetIterator import org.apache.lucene.search.IndexSearcher import org.apache.lucene.search.MultiCollector import org.apache.lucene.search.TermQuery import org.apache.lucene.store.Directory import org.apache.lucene.util.IOUtils import class org.apache.lucene.facet.TestRandomSamplingFacetsCollector super super extends decl float float DirectoryTaxonomyWriter Random LabelAndValue decl List TermQuery MatchingDocs FacetResult int RandomIndexWriter Directory RandomSamplingFacetsCollector FacetResult FacetsConfig decl int int FacetsCollector int MatchingDocs IndexSearcher FastTaxonomyFacetCounts Document LabelAndValue float float RandomSamplingFacetsCollector TaxonomyReader Directory public public throws decl_stmt org.apache.lucene.store.Directory = decl_stmt org.apache.lucene.store.Directory = decl_stmt java.util.Random = decl_stmt org.apache.lucene.facet.taxonomy.directory.DirectoryTaxonomyWriter = new decl_stmt org.apache.lucene.index.RandomIndexWriter = new decl_stmt org.apache.lucene.facet.FacetsConfig = new decl_stmt int final final = decl_stmt int = for = < ++ decl_stmt org.apache.lucene.document.Document = new call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new == : call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.facet.FacetsConfig.build(Document) call org.apache.lucene.facet.FacetsConfig.build(Document) call org.apache.lucene.facet.FacetsConfig.build(Document) call org.apache.lucene.facet.FacetsConfig.build(Document) call org.apache.lucene.facet.FacetsConfig.build(Document) call org.apache.lucene.index.RandomIndexWriter.forceMerge(int) call org.apache.lucene.index.RandomIndexWriter.forceMerge(int) call org.apache.lucene.index.RandomIndexWriter.forceMerge(int) call org.apache.lucene.index.RandomIndexWriter.forceMerge(int) call org.apache.lucene.index.RandomIndexWriter.forceMerge(int) - decl_stmt org.apache.lucene.search.IndexSearcher = call org.apache.lucene.index.RandomIndexWriter.getReader() call org.apache.lucene.index.RandomIndexWriter.getReader() call org.apache.lucene.index.RandomIndexWriter.getReader() call org.apache.lucene.index.RandomIndexWriter.getReader() call org.apache.lucene.index.RandomIndexWriter.getReader() decl_stmt org.apache.lucene.facet.taxonomy.TaxonomyReader = new decl_stmt org.apache.lucene.facet.RandomSamplingFacetsCollector = new / call java.util.Random.nextLong() call java.util.Random.nextLong() call java.util.Random.nextLong() call java.util.Random.nextLong() call java.util.Random.nextLong() call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) new new call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() for : call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() decl_stmt org.apache.lucene.search.TermQuery = new new decl_stmt org.apache.lucene.facet.RandomSamplingFacetsCollector = new / call java.util.Random.nextLong() call java.util.Random.nextLong() call java.util.Random.nextLong() call java.util.Random.nextLong() call java.util.Random.nextLong() decl_stmt org.apache.lucene.facet.FacetsCollector = new call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) decl_stmt java.util.List final final final < = call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() call org.apache.lucene.facet.RandomSamplingFacetsCollector.getMatchingDocs() decl_stmt int = = decl_stmt int = new call decl List.size() call decl List.size() call decl List.size() call decl List.size() call decl List.size() for = < ++ decl_stmt MatchingDocs = call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() decl_stmt org.apache.lucene.search.DocIdSetIterator final final = call float.bits() call float.bits() call float.bits() call float.bits() call float.bits() call float.bits() call float.bits() call float.bits() call float.bits() while call float.nextDoc() call float.nextDoc() call float.nextDoc() call float.nextDoc() call float.nextDoc() != ++ += += decl_stmt float = for = < ++ decl_stmt MatchingDocs = call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() decl_stmt float = float / if > decl_stmt float = float / += - / + < decl_stmt org.apache.lucene.facet.taxonomy.FastTaxonomyFacetCounts final final = new decl_stmt org.apache.lucene.facet.FacetResult final final = call FacetResult.getTopChildren() call FacetResult.getTopChildren() call FacetResult.getTopChildren() call FacetResult.getTopChildren() call FacetResult.getTopChildren() decl_stmt org.apache.lucene.facet.FacetResult final final = call org.apache.lucene.facet.RandomSamplingFacetsCollector.amortizeFacetCounts(FacetResult,FacetsConfig,IndexSearcher) call org.apache.lucene.facet.RandomSamplingFacetsCollector.amortizeFacetCounts(FacetResult,FacetsConfig,IndexSearcher) call org.apache.lucene.facet.RandomSamplingFacetsCollector.amortizeFacetCounts(FacetResult,FacetsConfig,IndexSearcher) call org.apache.lucene.facet.RandomSamplingFacetsCollector.amortizeFacetCounts(FacetResult,FacetsConfig,IndexSearcher) call org.apache.lucene.facet.RandomSamplingFacetsCollector.amortizeFacetCounts(FacetResult,FacetsConfig,IndexSearcher) for = < ++ decl_stmt org.apache.lucene.facet.LabelAndValue = decl_stmt org.apache.lucene.facet.LabelAndValue = call LabelAndValue.value() call LabelAndValue.value() call LabelAndValue.value() call LabelAndValue.value() call LabelAndValue.value() call LabelAndValue.value() call LabelAndValue.value() call LabelAndValue.value() call LabelAndValue.value() * / call org.apache.lucene.search.IndexSearcher.getIndexReader() call org.apache.lucene.search.IndexSearcher.getIndexReader() call org.apache.lucene.search.IndexSearcher.getIndexReader() call org.apache.lucene.search.IndexSearcher.getIndexReader() call org.apache.lucene.search.IndexSearcher.getIndexReader()