org.apache.lucene.expressions org.apache.lucene.document.Document import org.apache.lucene.document.Field import org.apache.lucene.document.NumericDocValuesField import org.apache.lucene.expressions.js.JavascriptCompiler import org.apache.lucene.expressions.js.VariableContext import org.apache.lucene.index.DirectoryReader import org.apache.lucene.index.RandomIndexWriter import org.apache.lucene.index.Term import org.apache.lucene.queries.function.ValueSource import org.apache.lucene.queries.function.valuesource.DoubleConstValueSource import org.apache.lucene.queries.function.valuesource.IntFieldSource import org.apache.lucene.search.CheckHits import org.apache.lucene.search.FieldDoc import org.apache.lucene.search.IndexSearcher import org.apache.lucene.search.MatchAllDocsQuery import org.apache.lucene.search.Query import org.apache.lucene.search.Sort import org.apache.lucene.search.SortField import org.apache.lucene.search.TermQuery import org.apache.lucene.search.TopFieldDocs import org.apache.lucene.store.Directory import org.apache.lucene.util.LuceneTestCase import static static org.apache.lucene.expressions.js.VariableContext.Type.MEMBER import static static org.apache.lucene.expressions.js.VariableContext.Type.STR_INDEX import static static org.apache.lucene.expressions.js.VariableContext.Type.INT_INDEX import class org.apache.lucene.expressions.TestDemoExpressions super super extends IndexSearcher Directory DirectoryReader Document RandomIndexWriter public public throws = decl_stmt org.apache.lucene.index.RandomIndexWriter = new decl_stmt org.apache.lucene.document.Document = new call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new - call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) = new call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new - call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) = new call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new - call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocument(Iterable) = call org.apache.lucene.index.RandomIndexWriter.getReader() call org.apache.lucene.index.RandomIndexWriter.getReader() call org.apache.lucene.index.RandomIndexWriter.getReader() call org.apache.lucene.index.RandomIndexWriter.getReader() call org.apache.lucene.index.RandomIndexWriter.getReader() = new call org.apache.lucene.index.RandomIndexWriter.close() call org.apache.lucene.index.RandomIndexWriter.close() call org.apache.lucene.index.RandomIndexWriter.close() call org.apache.lucene.index.RandomIndexWriter.close() call org.apache.lucene.index.RandomIndexWriter.close() public public throws call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call DirectoryReader.close() call Directory.close() call Directory.close() call Directory.close() call Directory.close() call Directory.close() Sort Expression SimpleBindings Query public public throws decl_stmt org.apache.solr.analytics.expression.Expression = decl_stmt org.apache.lucene.expressions.SimpleBindings = new call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) new call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) new decl_stmt org.apache.lucene.search.Sort = new call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() decl_stmt org.apache.lucene.search.Query = new new call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) Sort float FieldDoc Expression float Query SimpleBindings TopFieldDocs public public throws decl_stmt org.apache.solr.analytics.expression.Expression = decl_stmt org.apache.lucene.expressions.SimpleBindings = new call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) new decl_stmt org.apache.lucene.search.Sort = new call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() decl_stmt org.apache.lucene.search.Query = new new decl_stmt TopFieldDocs = call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) for = < ++ decl_stmt org.apache.lucene.search.FieldDoc = decl_stmt float = float decl_stmt float = Sort float FieldDoc Expression float Query SimpleBindings TopFieldDocs public public throws decl_stmt org.apache.solr.analytics.expression.Expression = decl_stmt org.apache.lucene.expressions.SimpleBindings = new call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) new decl_stmt org.apache.lucene.search.Sort = new call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() decl_stmt org.apache.lucene.search.Query = new new decl_stmt TopFieldDocs = call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) for = < ++ decl_stmt org.apache.lucene.search.FieldDoc = decl_stmt float = * decl_stmt float = Sort float FieldDoc Expression float Query SimpleBindings TopFieldDocs public public throws decl_stmt org.apache.solr.analytics.expression.Expression = decl_stmt org.apache.lucene.expressions.SimpleBindings = new call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) new call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) new decl_stmt org.apache.lucene.search.Sort = new call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() decl_stmt org.apache.lucene.search.Query = new new decl_stmt TopFieldDocs = call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) for = < ++ decl_stmt org.apache.lucene.search.FieldDoc = decl_stmt float = * decl_stmt float = Sort float FieldDoc Expression Expression float Query SimpleBindings TopFieldDocs public public throws decl_stmt org.apache.solr.analytics.expression.Expression = decl_stmt org.apache.solr.analytics.expression.Expression = decl_stmt org.apache.lucene.expressions.SimpleBindings = new call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) new call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) decl_stmt org.apache.lucene.search.Sort = new call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() decl_stmt org.apache.lucene.search.Query = new new decl_stmt TopFieldDocs = call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) for = < ++ decl_stmt org.apache.lucene.search.FieldDoc = decl_stmt float = * decl_stmt float = public public throws - + Sort float FieldDoc Expression Query float StringBuilder SimpleBindings TopFieldDocs private private throws decl_stmt org.apache.lucene.expressions.SimpleBindings = new decl_stmt java.lang.StringBuilder = new for = < ++ if > call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) + call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) new + decl_stmt org.apache.solr.analytics.expression.Expression = call java.lang.StringBuilder.toString() call java.lang.StringBuilder.toString() call java.lang.StringBuilder.toString() call java.lang.StringBuilder.toString() call java.lang.StringBuilder.toString() decl_stmt org.apache.lucene.search.Sort = new call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() decl_stmt org.apache.lucene.search.Query = new new decl_stmt TopFieldDocs = call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) for = < ++ decl_stmt org.apache.lucene.search.FieldDoc = decl_stmt float = * decl_stmt float = Sort Expression SimpleBindings TopFieldDocs FieldDoc public public throws decl_stmt org.apache.solr.analytics.expression.Expression = decl_stmt org.apache.lucene.expressions.SimpleBindings = new call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) new call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) new decl_stmt org.apache.lucene.search.Sort = new call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() decl_stmt TopFieldDocs = call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) new decl_stmt org.apache.lucene.search.FieldDoc = - = - = - Sort SimpleBindings Expression TopFieldDocs FieldDoc public public throws decl_stmt org.apache.solr.analytics.expression.Expression = decl_stmt org.apache.lucene.expressions.SimpleBindings = new call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) call org.apache.lucene.expressions.SimpleBindings.add(String,Expression) new decl_stmt org.apache.lucene.search.Sort = new call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() decl_stmt TopFieldDocs = call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) new decl_stmt org.apache.lucene.search.FieldDoc = - = - = - Sort FieldDoc Expression String String decl VariableContext Bindings TopFieldDocs public public throws decl_stmt org.apache.solr.analytics.expression.Expression = decl_stmt org.apache.lucene.expressions.Bindings = new public public decl_stmt org.apache.lucene.expressions.js.VariableContext = assert == decl_stmt java.lang.String = if call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) if > && == decl_stmt java.lang.String = if > && == && return new else + else else if call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) if > && == return new else else if call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) return new else throw new + + decl_stmt org.apache.lucene.search.Sort = new call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() call Expression.getSortField() decl_stmt TopFieldDocs = call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) call org.apache.lucene.search.IndexSearcher.search(Query,int) new decl_stmt org.apache.lucene.search.FieldDoc = - = - = - decl VariableContext String String public public decl_stmt org.apache.lucene.expressions.js.VariableContext = assert == decl_stmt java.lang.String = if call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) if > && == decl_stmt java.lang.String = if > && == && return new else + else else if call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) if > && == return new else else if call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) return new else throw new + +