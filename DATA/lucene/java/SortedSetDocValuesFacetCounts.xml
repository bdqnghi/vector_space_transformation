org.apache.lucene.facet.sortedset java.io.IOException import java.util.ArrayList import java.util.Collections import java.util.Comparator import java.util.List import java.util.Map import org.apache.lucene.facet.FacetResult import org.apache.lucene.facet.Facets import org.apache.lucene.facet.FacetsCollector import org.apache.lucene.facet.FacetsCollector.MatchingDocs import org.apache.lucene.facet.FacetsConfig import org.apache.lucene.facet.LabelAndValue import org.apache.lucene.facet.TopOrdAndIntQueue import org.apache.lucene.facet.sortedset.SortedSetDocValuesReaderState.OrdRange import org.apache.lucene.index.LeafReader import org.apache.lucene.index.IndexReader import org.apache.lucene.index.MultiDocValues import org.apache.lucene.index.MultiDocValues.MultiSortedSetDocValues import org.apache.lucene.index.ReaderUtil import org.apache.lucene.index.SortedSetDocValues import org.apache.lucene.search.DocIdSetIterator import org.apache.lucene.util.BytesRef import org.apache.lucene.util.LongValues import class org.apache.lucene.facet.sortedset.SortedSetDocValuesFacetCounts super super extends SortedSetDocValues String SortedSetDocValuesReaderState decl int OrdRange public public throws if <= throw new + + if > throw new decl_stmt OrdRange = call SortedSetDocValuesReaderState.getOrdRange() call SortedSetDocValuesReaderState.getOrdRange() call SortedSetDocValuesReaderState.getOrdRange() call SortedSetDocValuesReaderState.getOrdRange() call SortedSetDocValuesReaderState.getOrdRange() if == throw new + + return decl TopOrdAndIntQueue decl TopOrdAndIntQueue int int TopOrdAndIntQueue decl OrdAndValue decl OrdAndValue decl LabelAndValue int private final private final decl_stmt org.apache.lucene.facet.TopOrdAndIntQueue = decl_stmt int = decl_stmt int = decl_stmt int = decl_stmt OrdAndValue = for = <= ++ if > += ++ if > if == = new = = if == = new = call TopOrdAndIntQueue.insertWithOverflow() call TopOrdAndIntQueue.insertWithOverflow() call TopOrdAndIntQueue.insertWithOverflow() call TopOrdAndIntQueue.insertWithOverflow() call TopOrdAndIntQueue.insertWithOverflow() if call TopOrdAndIntQueue.size() call TopOrdAndIntQueue.size() call TopOrdAndIntQueue.size() call TopOrdAndIntQueue.size() call TopOrdAndIntQueue.size() == = call TopOrdAndIntQueue.top() call TopOrdAndIntQueue.top() call TopOrdAndIntQueue.top() call TopOrdAndIntQueue.top() call TopOrdAndIntQueue.top() if == return decl_stmt org.apache.lucene.facet.LabelAndValue = new call TopOrdAndIntQueue.size() call TopOrdAndIntQueue.size() call TopOrdAndIntQueue.size() call TopOrdAndIntQueue.size() call TopOrdAndIntQueue.size() for = - >= -- decl_stmt OrdAndValue = call TopOrdAndIntQueue.pop() call TopOrdAndIntQueue.pop() call TopOrdAndIntQueue.pop() call TopOrdAndIntQueue.pop() call TopOrdAndIntQueue.pop() decl_stmt org.apache.lucene.util.BytesRef final final = call SortedSetDocValues.lookupOrd() call SortedSetDocValues.lookupOrd() call SortedSetDocValues.lookupOrd() call SortedSetDocValues.lookupOrd() call SortedSetDocValues.lookupOrd() decl_stmt java.lang.String = call decl TopOrdAndIntQueue.utf8ToString() call decl TopOrdAndIntQueue.utf8ToString() call decl TopOrdAndIntQueue.utf8ToString() call decl TopOrdAndIntQueue.utf8ToString() call decl TopOrdAndIntQueue.utf8ToString() = new return new new int decl MultiDocValues int SortedSetDocValues int int DocIdSetIterator int decl OrdinalMap LongValues IndexReader LeafReader private final private final < throws decl_stmt org.apache.lucene.facet.taxonomy.directory.OrdinalMap if instanceof && > = else = decl_stmt org.apache.lucene.index.IndexReader = call SortedSetDocValuesReaderState.getOrigReader() call SortedSetDocValuesReaderState.getOrigReader() call SortedSetDocValuesReaderState.getOrigReader() call SortedSetDocValuesReaderState.getOrigReader() call SortedSetDocValuesReaderState.getOrigReader() for : decl_stmt org.apache.lucene.index.LeafReader = if != throw new decl_stmt org.apache.lucene.index.SortedSetDocValues = call IndexReader.getSortedSetDocValues() call IndexReader.getSortedSetDocValues() call IndexReader.getSortedSetDocValues() call IndexReader.getSortedSetDocValues() call IndexReader.getSortedSetDocValues() if == continue decl_stmt org.apache.lucene.search.DocIdSetIterator = if != decl_stmt int final final = decl_stmt org.apache.lucene.util.LongValues final final = call decl MultiDocValues.getGlobalOrds() call decl MultiDocValues.getGlobalOrds() call decl MultiDocValues.getGlobalOrds() call decl MultiDocValues.getGlobalOrds() call decl MultiDocValues.getGlobalOrds() decl_stmt int = int call LeafReader.getValueCount() call LeafReader.getValueCount() call LeafReader.getValueCount() call LeafReader.getValueCount() call LeafReader.getValueCount() if < / decl_stmt int while = call SortedSetDocValues.nextDoc() call SortedSetDocValues.nextDoc() call SortedSetDocValues.nextDoc() call SortedSetDocValues.nextDoc() call SortedSetDocValues.nextDoc() != call LeafReader.setDocument() call LeafReader.setDocument() call LeafReader.setDocument() call LeafReader.setDocument() call LeafReader.setDocument() decl_stmt int = int call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() while != int call int.get() call int.get() call int.get() call int.get() call int.get() ++ = int call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() else decl_stmt int final final final = new decl_stmt int while = call SortedSetDocValues.nextDoc() call SortedSetDocValues.nextDoc() call SortedSetDocValues.nextDoc() call SortedSetDocValues.nextDoc() call SortedSetDocValues.nextDoc() != call LeafReader.setDocument() call LeafReader.setDocument() call LeafReader.setDocument() call LeafReader.setDocument() call LeafReader.setDocument() decl_stmt int = int call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() while != ++ = int call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() for = < ++ decl_stmt int = if != int call int.get() call int.get() call int.get() call int.get() call int.get() += else decl_stmt int while = call SortedSetDocValues.nextDoc() call SortedSetDocValues.nextDoc() call SortedSetDocValues.nextDoc() call SortedSetDocValues.nextDoc() call SortedSetDocValues.nextDoc() != call LeafReader.setDocument() call LeafReader.setDocument() call LeafReader.setDocument() call LeafReader.setDocument() call LeafReader.setDocument() decl_stmt int = int call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() while != ++ = int call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() call LeafReader.nextOrd() int public public if != throw new decl_stmt int = int call SortedSetDocValues.lookupTerm() call SortedSetDocValues.lookupTerm() call SortedSetDocValues.lookupTerm() call SortedSetDocValues.lookupTerm() call SortedSetDocValues.lookupTerm() new if < return - return FacetResult decl List public < public < throws decl_stmt java.util.List < = new <> for < : call SortedSetDocValuesReaderState.getPrefixToOrdRange() call SortedSetDocValuesReaderState.getPrefixToOrdRange() call SortedSetDocValuesReaderState.getPrefixToOrdRange() call SortedSetDocValuesReaderState.getPrefixToOrdRange() call SortedSetDocValuesReaderState.getPrefixToOrdRange() decl_stmt org.apache.lucene.facet.FacetResult = if != call decl List.add() call decl List.add() call decl List.add() call decl List.add() call decl List.add() new < public public if > return - else if > return else return return public public if > return - else if > return else return