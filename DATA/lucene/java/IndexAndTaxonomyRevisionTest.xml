org.apache.lucene.replicator java.io.IOException import java.io.InputStream import java.util.List import java.util.Map import java.util.Map.Entry import org.apache.lucene.document.Document import org.apache.lucene.facet.FacetField import org.apache.lucene.facet.FacetsConfig import org.apache.lucene.facet.taxonomy.TaxonomyWriter import org.apache.lucene.index.IndexFileNames import org.apache.lucene.index.IndexWriter import org.apache.lucene.index.IndexWriterConfig import org.apache.lucene.index.SnapshotDeletionPolicy import org.apache.lucene.replicator.IndexAndTaxonomyRevision.SnapshotDirectoryTaxonomyWriter import org.apache.lucene.store.Directory import org.apache.lucene.store.IOContext import org.apache.lucene.store.IndexInput import org.apache.lucene.store.MockDirectoryWrapper import org.apache.lucene.util.IOUtils import org.junit.Test import class org.apache.lucene.replicator.IndexAndTaxonomyRevisionTest super super extends Document FacetsConfig private private throws decl_stmt org.apache.lucene.facet.FacetsConfig = new decl_stmt org.apache.lucene.document.Document = new call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new return call org.apache.lucene.facet.FacetsConfig.build(Document) call org.apache.lucene.facet.FacetsConfig.build(Document) call org.apache.lucene.facet.FacetsConfig.build(Document) call org.apache.lucene.facet.FacetsConfig.build(Document) call org.apache.lucene.facet.FacetsConfig.build(Document) Directory Directory IndexWriter IndexWriterConfig SnapshotDirectoryTaxonomyWriter public public throws decl_stmt org.apache.lucene.store.Directory = decl_stmt org.apache.lucene.index.IndexWriterConfig = new call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) new call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() decl_stmt org.apache.lucene.index.IndexWriter = new decl_stmt org.apache.lucene.store.Directory = decl_stmt SnapshotDirectoryTaxonomyWriter = new new call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() Directory Revision IndexWriter IndexWriterConfig SnapshotDirectoryTaxonomyWriter Directory public public throws decl_stmt org.apache.lucene.store.Directory = decl_stmt org.apache.lucene.index.IndexWriterConfig = new call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) new call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() decl_stmt org.apache.lucene.index.IndexWriter = new decl_stmt org.apache.lucene.store.Directory = decl_stmt SnapshotDirectoryTaxonomyWriter = new try call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() decl_stmt org.apache.lucene.replicator.Revision = new call org.apache.lucene.replicator.Revision.release() call org.apache.lucene.replicator.Revision.release() call org.apache.lucene.replicator.Revision.release() call org.apache.lucene.replicator.Revision.release() call org.apache.lucene.replicator.Revision.release() + + = new call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() new call org.apache.lucene.replicator.Revision.release() call org.apache.lucene.replicator.Revision.release() call org.apache.lucene.replicator.Revision.release() call org.apache.lucene.replicator.Revision.release() call org.apache.lucene.replicator.Revision.release() + call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() finally Directory Revision IndexWriter IndexWriterConfig SnapshotDirectoryTaxonomyWriter Directory String decl Map public public throws decl_stmt org.apache.lucene.store.Directory = decl_stmt org.apache.lucene.index.IndexWriterConfig = new call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) new call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() decl_stmt org.apache.lucene.index.IndexWriter = new decl_stmt org.apache.lucene.store.Directory = decl_stmt SnapshotDirectoryTaxonomyWriter = new try call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() decl_stmt org.apache.lucene.replicator.Revision = new decl_stmt java.util.Map < < = call org.apache.lucene.replicator.Revision.getSourceFiles() call org.apache.lucene.replicator.Revision.getSourceFiles() call org.apache.lucene.replicator.Revision.getSourceFiles() call org.apache.lucene.replicator.Revision.getSourceFiles() call org.apache.lucene.replicator.Revision.getSourceFiles() call decl Map.size() call decl Map.size() call decl Map.size() call decl Map.size() call decl Map.size() for < : call decl Map.values() call decl Map.values() call decl Map.values() call decl Map.values() call decl Map.values() decl_stmt java.lang.String = - call java.lang.String.startsWith(String,int) call java.lang.String.startsWith(String,int) call java.lang.String.startsWith(String,int) call java.lang.String.startsWith(String,int) call java.lang.String.startsWith(String,int) call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() finally IndexInput Directory InputStream Revision int String IndexWriter int IndexWriterConfig SnapshotDirectoryTaxonomyWriter Directory decl byte Directory decl byte public public throws decl_stmt org.apache.lucene.store.Directory = decl_stmt org.apache.lucene.index.IndexWriterConfig = new call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) call org.apache.lucene.index.IndexWriterConfig.setIndexDeletionPolicy(IndexDeletionPolicy) new call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() call org.apache.lucene.index.IndexWriterConfig.getIndexDeletionPolicy() decl_stmt org.apache.lucene.index.IndexWriter = new decl_stmt org.apache.lucene.store.Directory = decl_stmt SnapshotDirectoryTaxonomyWriter = new try call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call org.apache.lucene.index.IndexWriter.commit(SegmentInfos) call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() call SnapshotDirectoryTaxonomyWriter.commit() decl_stmt org.apache.lucene.replicator.Revision = new for < < : call org.apache.lucene.replicator.Revision.getSourceFiles() call org.apache.lucene.replicator.Revision.getSourceFiles() call org.apache.lucene.replicator.Revision.getSourceFiles() call org.apache.lucene.replicator.Revision.getSourceFiles() call org.apache.lucene.replicator.Revision.getSourceFiles() decl_stmt java.lang.String = decl_stmt org.apache.lucene.store.Directory = call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) : for : decl_stmt org.apache.lucene.store.IndexInput = call Directory.openInput() call Directory.openInput() call Directory.openInput() call Directory.openInput() call Directory.openInput() decl_stmt java.io.InputStream = call org.apache.lucene.replicator.Revision.open(String,String) call org.apache.lucene.replicator.Revision.open(String,String) call org.apache.lucene.replicator.Revision.open(String,String) call org.apache.lucene.replicator.Revision.open(String,String) call org.apache.lucene.replicator.Revision.open(String,String) call IndexInput.length() call IndexInput.length() call IndexInput.length() call IndexInput.length() call IndexInput.length() call InputStream.available() call InputStream.available() call InputStream.available() call InputStream.available() call InputStream.available() decl_stmt byte = new int call IndexInput.length() call IndexInput.length() call IndexInput.length() call IndexInput.length() call IndexInput.length() decl_stmt byte = new int call IndexInput.length() call IndexInput.length() call IndexInput.length() call IndexInput.length() call IndexInput.length() decl_stmt int = if decl_stmt int = if >= call IndexInput.length() call IndexInput.length() call IndexInput.length() call IndexInput.length() call IndexInput.length() = call java.io.InputStream.skip(long) call java.io.InputStream.skip(long) call java.io.InputStream.skip(long) call java.io.InputStream.skip(long) call java.io.InputStream.skip(long) call IndexInput.seek() call IndexInput.seek() call IndexInput.seek() call IndexInput.seek() call IndexInput.seek() = call IndexInput.readBytes() call IndexInput.readBytes() call IndexInput.readBytes() call IndexInput.readBytes() call IndexInput.readBytes() - call java.io.InputStream.read(byte) call java.io.InputStream.read(byte) call java.io.InputStream.read(byte) call java.io.InputStream.read(byte) call java.io.InputStream.read(byte) - call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() finally