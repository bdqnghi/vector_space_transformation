org.apache.solr.search.facet java.io.Closeable import java.io.IOException import java.lang.invoke.MethodHandles import java.util.Iterator import java.util.LinkedHashMap import java.util.List import java.util.Map import java.util.concurrent.atomic.AtomicLong import org.apache.lucene.index.LeafReader import org.apache.lucene.index.LeafReaderContext import org.apache.lucene.index.SlowCompositeReaderWrapper import org.apache.lucene.index.Term import org.apache.lucene.index.TermsEnum import org.apache.lucene.search.Query import org.apache.lucene.search.TermQuery import org.apache.lucene.uninverting.DocTermOrds import org.apache.lucene.util.BytesRef import org.apache.lucene.util.CharsRefBuilder import org.apache.lucene.util.FixedBitSet import org.apache.solr.common.SolrException import org.apache.solr.core.SolrCore import org.apache.solr.schema.FieldType import org.apache.solr.schema.TrieField import org.apache.solr.search.BitDocSet import org.apache.solr.search.DocIterator import org.apache.solr.search.DocSet import org.apache.solr.search.SolrCache import org.apache.solr.search.SolrIndexSearcher import org.slf4j.Logger import org.slf4j.LoggerFactory import class org.apache.solr.search.facet.UnInvertedField super super extends decl DocsEnumState AtomicLong Logger long decl int decl SolrIndexSearcher decl Map int SolrIndexSearcher return + + + + decl int DocSet TopTerm BytesRef Term protected protected throws if >= decl_stmt int = new - * = decl_stmt org.apache.lucene.util.BytesRef final final = if > decl_stmt org.apache.lucene.index.Term = new decl_stmt TopTerm = new = call org.apache.lucene.index.Term.bytes() call org.apache.lucene.index.Term.bytes() call org.apache.lucene.index.Term.bytes() call org.apache.lucene.index.Term.bytes() call org.apache.lucene.index.Term.bytes() = = new call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() if == = new = = call decl DocsEnumState.getLeafReader() call decl DocsEnumState.getLeafReader() call decl DocsEnumState.getLeafReader() call decl DocsEnumState.getLeafReader() call decl DocsEnumState.getLeafReader() = = = = decl_stmt org.apache.solr.search.DocSet = call decl DocsEnumState.getDocSet() call decl DocsEnumState.getDocSet() call decl DocsEnumState.getDocSet() call decl DocsEnumState.getDocSet() call decl DocsEnumState.getDocSet() = call org.apache.solr.search.DocSet.size() call org.apache.solr.search.DocSet.size() call org.apache.solr.search.DocSet.size() call org.apache.solr.search.DocSet.size() call org.apache.solr.search.DocSet.size() protected protected = long public public if != return decl_stmt long = += * + += call decl Map.size() call decl Map.size() call decl Map.size() call decl Map.size() call decl Map.size() * for : call decl Map.values() call decl Map.values() call decl Map.values() call decl Map.values() call decl Map.values() += if != += * if != += + + + + << + = return public public return public public throws return public public throws if == = call decl DocsEnumState.getLeafReader() call decl DocsEnumState.getLeafReader() call decl DocsEnumState.getLeafReader() call decl DocsEnumState.getLeafReader() call decl DocsEnumState.getLeafReader() return public public throws if != for = < ++ if int decl byte int int int byte int public public if > decl_stmt int = if & == decl_stmt int = >>> decl_stmt int = >>> & decl_stmt byte = decl_stmt int = for decl_stmt int = for decl_stmt byte = ++ = << | & if & == break if == break += - else decl_stmt int = decl_stmt int = for = << | & if & == if == break += - = >>>= public public throws for : int decl int decl byte int int DocSet int int int DocIterator boolean int FixedBitSet byte int private private throws decl_stmt org.apache.solr.search.DocSet = decl_stmt int = call org.apache.solr.search.DocSet.size() call org.apache.solr.search.DocSet.size() call org.apache.solr.search.DocSet.size() call org.apache.solr.search.DocSet.size() call org.apache.solr.search.DocSet.size() decl_stmt int = call decl DocsEnumState.maxDoc() call decl DocsEnumState.maxDoc() call decl DocsEnumState.maxDoc() call decl DocsEnumState.maxDoc() call decl DocsEnumState.maxDoc() if < return decl_stmt int final final final = decl_stmt boolean = > >> && > && instanceof if decl_stmt org.apache.lucene.util.FixedBitSet = call org.apache.lucene.util.FixedBitSet.flip(int,int) call org.apache.lucene.util.FixedBitSet.flip(int,int) call org.apache.lucene.util.FixedBitSet.flip(int,int) call org.apache.lucene.util.FixedBitSet.flip(int,int) call org.apache.lucene.util.FixedBitSet.flip(int,int) = new - for : call decl Map.values() call decl Map.values() call decl Map.values() call decl Map.values() call decl Map.values() call decl DocsEnumState.numDocs() call decl DocsEnumState.numDocs() call decl DocsEnumState.numDocs() call decl DocsEnumState.numDocs() call decl DocsEnumState.numDocs() if > decl_stmt org.apache.solr.search.DocIterator = call org.apache.solr.search.DocSet.iterator() call org.apache.solr.search.DocSet.iterator() call org.apache.solr.search.DocSet.iterator() call org.apache.solr.search.DocSet.iterator() call org.apache.solr.search.DocSet.iterator() while call DocIterator.hasNext() call DocIterator.hasNext() call DocIterator.hasNext() call DocIterator.hasNext() call DocIterator.hasNext() decl_stmt int = call org.apache.solr.search.DocIterator.nextDoc() call org.apache.solr.search.DocIterator.nextDoc() call org.apache.solr.search.DocIterator.nextDoc() call org.apache.solr.search.DocIterator.nextDoc() call org.apache.solr.search.DocIterator.nextDoc() decl_stmt int = if & == decl_stmt int = >>> decl_stmt int = >>> & decl_stmt byte = decl_stmt int = for decl_stmt int = for decl_stmt byte = ++ = << | & if & == break if == break += - else decl_stmt int = decl_stmt int = for = << | & if & == if == break += - = >>>= if for = < ++ - * public public throws if == && == && == && >= return int decl byte int int int CountSlotAcc int int int int int decl Iterator int DocSet int int byte int decl List int LeafReaderContext DocIterator int int public public throws call java.util.concurrent.atomic.AtomicLong.incrementAndGet() call java.util.concurrent.atomic.AtomicLong.incrementAndGet() call java.util.concurrent.atomic.AtomicLong.incrementAndGet() call java.util.concurrent.atomic.AtomicLong.incrementAndGet() call java.util.concurrent.atomic.AtomicLong.incrementAndGet() decl_stmt int = decl_stmt int = decl_stmt int = decl_stmt org.apache.solr.search.DocSet = decl_stmt int = decl_stmt CountSlotAcc final final = for : call decl Map.values() call decl Map.values() call decl Map.values() call decl Map.values() call decl Map.values() if >= && < try = call decl DocsEnumState.getDocSet() call decl DocsEnumState.getDocSet() call decl DocsEnumState.getDocSet() call decl DocsEnumState.getDocSet() call decl DocsEnumState.getDocSet() decl_stmt int = - call CountSlotAcc.incrementCount() call CountSlotAcc.incrementCount() call CountSlotAcc.incrementCount() call CountSlotAcc.incrementCount() call CountSlotAcc.incrementCount() - if > ++ if > decl_stmt java.util.List final final final < = call decl DocsEnumState.getIndexReader() call decl DocsEnumState.getIndexReader() call decl DocsEnumState.getIndexReader() call decl DocsEnumState.getIndexReader() call decl DocsEnumState.getIndexReader() decl_stmt java.util.Iterator final final final < = call decl List.iterator() call decl List.iterator() call decl List.iterator() call decl List.iterator() call decl List.iterator() decl_stmt org.apache.lucene.index.LeafReaderContext = decl_stmt int = decl_stmt int decl_stmt int = decl_stmt org.apache.solr.search.DocIterator = call org.apache.solr.search.DocSet.iterator() call org.apache.solr.search.DocSet.iterator() call org.apache.solr.search.DocSet.iterator() call org.apache.solr.search.DocSet.iterator() call org.apache.solr.search.DocSet.iterator() while call DocIterator.hasNext() call DocIterator.hasNext() call DocIterator.hasNext() call DocIterator.hasNext() call DocIterator.hasNext() decl_stmt int = call org.apache.solr.search.DocIterator.nextDoc() call org.apache.solr.search.DocIterator.nextDoc() call org.apache.solr.search.DocIterator.nextDoc() call org.apache.solr.search.DocIterator.nextDoc() call org.apache.solr.search.DocIterator.nextDoc() if >= do = call decl Iterator.next() call decl Iterator.next() call decl Iterator.next() call decl Iterator.next() call decl Iterator.next() if == throw new = = call org.apache.lucene.index.LeafReaderContext.reader() call org.apache.lucene.index.LeafReaderContext.reader() call org.apache.lucene.index.LeafReaderContext.reader() call org.apache.lucene.index.LeafReaderContext.reader() call org.apache.lucene.index.LeafReaderContext.reader() = + >= assert >= decl_stmt int = - decl_stmt int = if & == decl_stmt int = >>> decl_stmt int = >>> & decl_stmt byte = decl_stmt int = for decl_stmt int = for decl_stmt byte = ++ = << | & if & == break if == break += - decl_stmt int = - if < continue if >= break call CountSlotAcc.incrementCount() call CountSlotAcc.incrementCount() call CountSlotAcc.incrementCount() call CountSlotAcc.incrementCount() call CountSlotAcc.incrementCount() else decl_stmt int = decl_stmt int = for = << | & if & == if == break += - decl_stmt int = - if >= if >= break call CountSlotAcc.incrementCount() call CountSlotAcc.incrementCount() call CountSlotAcc.incrementCount() call CountSlotAcc.incrementCount() call CountSlotAcc.incrementCount() = >>>= return TopTerm throws if call decl Map.size() call decl Map.size() call decl Map.size() call decl Map.size() call decl Map.size() > decl_stmt TopTerm = call decl Map.get() call decl Map.get() call decl Map.get() call decl Map.get() call decl Map.get() if != return return long public public decl_stmt long final final = == : + + + + << + return + + + + + + + + + + + + + call decl Map.size() call decl Map.size() call decl Map.size() call decl Map.size() call decl Map.size() + + + + call java.util.concurrent.atomic.AtomicLong.get() call java.util.concurrent.atomic.AtomicLong.get() call java.util.concurrent.atomic.AtomicLong.get() call java.util.concurrent.atomic.AtomicLong.get() call java.util.concurrent.atomic.AtomicLong.get() + Boolean decl SolrCache UnInvertedField public static public static throws decl_stmt org.apache.solr.search.SolrCache < = call decl DocsEnumState.getFieldValueCache() call decl DocsEnumState.getFieldValueCache() call decl DocsEnumState.getFieldValueCache() call decl DocsEnumState.getFieldValueCache() call decl DocsEnumState.getFieldValueCache() if == return new decl_stmt org.apache.solr.search.facet.UnInvertedField = decl_stmt java.lang.Boolean = synchronized = call decl SolrCache.get() call decl SolrCache.get() call decl SolrCache.get() call decl SolrCache.get() call decl SolrCache.get() if == call decl SolrCache.put() call decl SolrCache.put() call decl SolrCache.put() call decl SolrCache.put() call decl SolrCache.put() else if != return = while try synchronized = call decl SolrCache.get() call decl SolrCache.get() call decl SolrCache.get() call decl SolrCache.get() call decl SolrCache.get() if != return call decl SolrCache.wait() call decl SolrCache.wait() call decl SolrCache.wait() call decl SolrCache.wait() call decl SolrCache.wait() catch throw new = new synchronized call decl SolrCache.put() call decl SolrCache.put() call decl SolrCache.put() call decl SolrCache.put() call decl SolrCache.put() call decl SolrCache.notifyAll() call decl SolrCache.notifyAll() call decl SolrCache.notifyAll() call decl SolrCache.notifyAll() call decl SolrCache.notifyAll() return