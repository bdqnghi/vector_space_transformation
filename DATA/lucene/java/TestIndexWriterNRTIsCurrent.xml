org.apache.lucene.index java.io.IOException import java.util.Random import java.util.concurrent.CountDownLatch import org.apache.lucene.analysis.MockAnalyzer import org.apache.lucene.document.Document import org.apache.lucene.document.Field import org.apache.lucene.document.TextField import org.apache.lucene.store.Directory import org.apache.lucene.util.BytesRef import org.apache.lucene.util.LuceneTestCase import class org.apache.lucene.index.TestIndexWriterNRTIsCurrent super super extends boolean IndexWriter WriterThread decl ReaderThread IndexWriterConfig CountDownLatch ReaderHolder Directory public public throws decl_stmt org.apache.lucene.store.Directory = decl_stmt org.apache.lucene.index.IndexWriterConfig = new decl_stmt org.apache.lucene.index.IndexWriter = new decl_stmt ReaderHolder = new decl_stmt ReaderThread = new decl_stmt java.util.concurrent.CountDownLatch final final = new decl_stmt WriterThread = new for = < ++ = new call WriterThread.start() call WriterThread.start() call WriterThread.start() call WriterThread.start() call WriterThread.start() call WriterThread.join() call WriterThread.join() call WriterThread.join() call WriterThread.join() call WriterThread.join() decl_stmt boolean = != if call WriterThread.failed() call WriterThread.failed() call WriterThread.failed() call WriterThread.failed() call WriterThread.failed() call WriterThread.failed() call WriterThread.failed() call WriterThread.failed() call WriterThread.failed() for = < ++ if != call boolean.printStackTrace() call boolean.printStackTrace() call boolean.printStackTrace() call boolean.printStackTrace() call boolean.printStackTrace() = call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call Directory.close() call Directory.close() call Directory.close() call Directory.close() call Directory.close() Term Document Random DirectoryReader DirectoryReader float public public decl_stmt org.apache.lucene.index.DirectoryReader = decl_stmt java.util.Random = try decl_stmt org.apache.lucene.document.Document = new call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new = = decl_stmt org.apache.lucene.index.Term = new for = < && ! ++ decl_stmt float = call java.util.Random.nextFloat() call java.util.Random.nextFloat() call java.util.Random.nextFloat() call java.util.Random.nextFloat() call java.util.Random.nextFloat() if < call org.apache.lucene.index.Term.set(String,BytesRef) call org.apache.lucene.index.Term.set(String,BytesRef) call org.apache.lucene.index.Term.set(String,BytesRef) call org.apache.lucene.index.Term.set(String,BytesRef) call org.apache.lucene.index.Term.set(String,BytesRef) new else if < else call org.apache.lucene.index.Term.set(String,BytesRef) call org.apache.lucene.index.Term.set(String,BytesRef) call org.apache.lucene.index.Term.set(String,BytesRef) call org.apache.lucene.index.Term.set(String,BytesRef) call org.apache.lucene.index.Term.set(String,BytesRef) new if != = if = if call java.util.Random.nextBoolean() call java.util.Random.nextBoolean() call java.util.Random.nextBoolean() call java.util.Random.nextBoolean() call java.util.Random.nextBoolean() decl_stmt org.apache.lucene.index.DirectoryReader final final = if != call DirectoryReader.decRef() call DirectoryReader.decRef() call DirectoryReader.decRef() call DirectoryReader.decRef() call DirectoryReader.decRef() = if call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() call DirectoryReader.numDocs() == catch = finally = if if != try call DirectoryReader.decRef() call DirectoryReader.decRef() call DirectoryReader.decRef() call DirectoryReader.decRef() call DirectoryReader.decRef() catch if + boolean DirectoryReader public public try catch = return decl_stmt org.apache.lucene.index.DirectoryReader while = != if call DirectoryReader.tryIncRef() call DirectoryReader.tryIncRef() call DirectoryReader.tryIncRef() call DirectoryReader.tryIncRef() call DirectoryReader.tryIncRef() try decl_stmt boolean = call DirectoryReader.isCurrent() call DirectoryReader.isCurrent() call DirectoryReader.isCurrent() call DirectoryReader.isCurrent() call DirectoryReader.isCurrent() if + + + + + catch if + + + + = = return finally try call DirectoryReader.decRef() call DirectoryReader.decRef() call DirectoryReader.decRef() call DirectoryReader.decRef() call DirectoryReader.decRef() catch if == =