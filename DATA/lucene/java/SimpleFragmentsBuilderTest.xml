org.apache.lucene.search.vectorhighlight org.apache.lucene.analysis.MockAnalyzer import org.apache.lucene.document.Document import org.apache.lucene.document.Field import org.apache.lucene.document.FieldType import org.apache.lucene.document.TextField import org.apache.lucene.index.DirectoryReader import org.apache.lucene.index.IndexReader import org.apache.lucene.index.IndexWriter import org.apache.lucene.index.IndexWriterConfig import org.apache.lucene.index.IndexWriterConfig.OpenMode import org.apache.lucene.index.RandomIndexWriter import org.apache.lucene.index.Term import org.apache.lucene.search.BooleanClause import org.apache.lucene.search.BooleanQuery import org.apache.lucene.search.Query import org.apache.lucene.search.TermQuery import org.apache.lucene.search.highlight.SimpleHTMLEncoder import org.apache.lucene.store.Directory import org.apache.lucene.util.TestUtil import java.util.ArrayList import java.util.HashMap import java.util.HashSet import java.util.List import java.util.Map import java.util.Set import class org.apache.lucene.search.vectorhighlight.SimpleFragmentsBuilderTest super super extends FieldFragList SimpleFragmentsBuilder public public throws decl_stmt org.apache.lucene.search.vectorhighlight.FieldFragList = new new decl_stmt org.apache.solr.highlight.SimpleFragmentsBuilder = new call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() = new new new call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() FieldFragList SimpleFragmentsBuilder decl String public public throws decl_stmt org.apache.lucene.search.vectorhighlight.FieldFragList = new new decl_stmt org.apache.solr.highlight.SimpleFragmentsBuilder = new decl_stmt java.lang.String = call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() FieldFragList decl Builder decl BooleanQuery SimpleFragmentsBuilder public public throws decl_stmt org.apache.lucene.util.fst.Builder = new call decl BooleanQuery.add() call decl BooleanQuery.add() call decl BooleanQuery.add() call decl BooleanQuery.add() call decl BooleanQuery.add() new new call decl BooleanQuery.add() call decl BooleanQuery.add() call decl BooleanQuery.add() call decl BooleanQuery.add() call decl BooleanQuery.add() new new decl_stmt org.apache.lucene.search.vectorhighlight.FieldFragList = call decl BooleanQuery.build() call decl BooleanQuery.build() call decl BooleanQuery.build() call decl BooleanQuery.build() call decl BooleanQuery.build() decl_stmt org.apache.solr.highlight.SimpleFragmentsBuilder = new decl_stmt java.lang.String = call FieldFragList.createFragments() call FieldFragList.createFragments() call FieldFragList.createFragments() call FieldFragList.createFragments() call FieldFragList.createFragments() decl String FieldFragList SimpleFragmentsBuilder decl String public public throws decl_stmt org.apache.lucene.search.vectorhighlight.FieldFragList = new new decl_stmt org.apache.solr.highlight.SimpleFragmentsBuilder = new decl_stmt java.lang.String = decl_stmt java.lang.String = call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() new FieldQuery FieldTermStack FieldPhraseList private private throws decl_stmt org.apache.lucene.search.vectorhighlight.FieldQuery = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldTermStack = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldPhraseList = new return new FieldQuery FieldPhraseList FieldFragList SimpleFragListBuilder SimpleFragmentsBuilder FieldTermStack public public throws decl_stmt org.apache.lucene.search.vectorhighlight.FieldQuery = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldTermStack = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldPhraseList = new decl_stmt org.apache.solr.highlight.SimpleFragListBuilder = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldFragList = call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() decl_stmt org.apache.solr.highlight.SimpleFragmentsBuilder = new call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() FieldQuery FieldPhraseList FieldFragList SimpleFragListBuilder SimpleFragmentsBuilder FieldTermStack public public throws decl_stmt org.apache.lucene.search.vectorhighlight.FieldQuery = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldTermStack = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldPhraseList = new decl_stmt org.apache.solr.highlight.SimpleFragListBuilder = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldFragList = call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() decl_stmt org.apache.solr.highlight.SimpleFragmentsBuilder = new call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() FieldQuery FieldPhraseList FieldFragList SimpleFragListBuilder SimpleFragmentsBuilder FieldTermStack public public throws decl_stmt org.apache.lucene.search.vectorhighlight.FieldQuery = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldTermStack = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldPhraseList = new decl_stmt org.apache.solr.highlight.SimpleFragListBuilder = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldFragList = call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() decl_stmt org.apache.solr.highlight.SimpleFragmentsBuilder = new call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() FieldQuery FieldPhraseList FieldFragList SimpleFragListBuilder SimpleFragmentsBuilder FieldTermStack public public throws decl_stmt org.apache.lucene.search.vectorhighlight.FieldQuery = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldTermStack = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldPhraseList = new decl_stmt org.apache.solr.highlight.SimpleFragListBuilder = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldFragList = call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() decl_stmt org.apache.solr.highlight.SimpleFragmentsBuilder = new call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() Document IndexWriter FieldType protected protected throws decl_stmt org.apache.lucene.index.IndexWriter = new new decl_stmt org.apache.lucene.document.Document = new decl_stmt org.apache.solr.schema.FieldType = new call org.apache.solr.schema.FieldType.setStoreTermVectors(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectors(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectors(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectors(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectors(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorOffsets(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorOffsets(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorOffsets(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorOffsets(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorOffsets(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorPositions(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorPositions(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorPositions(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorPositions(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorPositions(boolean) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.addDocument(Iterable) call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() call org.apache.lucene.index.IndexWriter.close() if != = FieldQuery FieldPhraseList FieldFragList SimpleFragListBuilder SimpleFragmentsBuilder FieldTermStack public public throws decl_stmt org.apache.lucene.search.vectorhighlight.FieldQuery = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldTermStack = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldPhraseList = new decl_stmt org.apache.solr.highlight.SimpleFragListBuilder = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldFragList = call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() decl_stmt org.apache.solr.highlight.SimpleFragmentsBuilder = new call SimpleFragmentsBuilder.setMultiValuedSeparator() call SimpleFragmentsBuilder.setMultiValuedSeparator() call SimpleFragmentsBuilder.setMultiValuedSeparator() call SimpleFragmentsBuilder.setMultiValuedSeparator() call SimpleFragmentsBuilder.setMultiValuedSeparator() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() FieldQuery FieldPhraseList FieldFragList SimpleFragListBuilder SimpleFragmentsBuilder FieldTermStack public public throws decl_stmt org.apache.lucene.search.vectorhighlight.FieldQuery = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldTermStack = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldPhraseList = new decl_stmt org.apache.solr.highlight.SimpleFragListBuilder = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldFragList = call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() decl_stmt org.apache.solr.highlight.SimpleFragmentsBuilder = new call SimpleFragmentsBuilder.setMultiValuedSeparator() call SimpleFragmentsBuilder.setMultiValuedSeparator() call SimpleFragmentsBuilder.setMultiValuedSeparator() call SimpleFragmentsBuilder.setMultiValuedSeparator() call SimpleFragmentsBuilder.setMultiValuedSeparator() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() FieldQuery FieldPhraseList FieldFragList SimpleFragListBuilder SimpleFragmentsBuilder FieldTermStack decl String public public throws decl_stmt org.apache.lucene.search.vectorhighlight.FieldQuery = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldTermStack = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldPhraseList = new decl_stmt org.apache.solr.highlight.SimpleFragListBuilder = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldFragList = call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() decl_stmt org.apache.solr.highlight.SimpleFragmentsBuilder = new call SimpleFragmentsBuilder.setDiscreteMultiValueHighlighting() call SimpleFragmentsBuilder.setDiscreteMultiValueHighlighting() call SimpleFragmentsBuilder.setDiscreteMultiValueHighlighting() call SimpleFragmentsBuilder.setDiscreteMultiValueHighlighting() call SimpleFragmentsBuilder.setDiscreteMultiValueHighlighting() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() call SimpleFragmentsBuilder.createFragment() = new = new = new = new = call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() decl_stmt java.lang.String = call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() = new = new = new = new = call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() = call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() int int FieldTermStack decl String FieldPhraseList RandomIndexWriter decl Map int IndexReader int Document FieldQuery boolean decl List decl String FieldFragList decl List SimpleFragListBuilder int SimpleFragmentsBuilder decl String decl String StringBuilder FieldType String decl List Directory String public public throws decl_stmt java.lang.String = new + * for = < ++ decl_stmt java.lang.String do = = decl_stmt org.apache.lucene.store.Directory = decl_stmt org.apache.lucene.index.RandomIndexWriter = new new decl_stmt org.apache.solr.schema.FieldType = new call org.apache.solr.schema.FieldType.setStoreTermVectors(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectors(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectors(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectors(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectors(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorOffsets(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorOffsets(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorOffsets(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorOffsets(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorOffsets(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorPositions(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorPositions(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorPositions(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorPositions(boolean) call org.apache.solr.schema.FieldType.setStoreTermVectorPositions(boolean) decl_stmt int = * decl_stmt int = + decl_stmt int = + decl_stmt java.util.List < = new <> decl_stmt java.util.List < = new <> decl_stmt java.util.Map < < = new <> for = < ++ decl_stmt org.apache.lucene.document.Document = new decl_stmt java.lang.String = new for = < ++ decl_stmt java.lang.String = new = decl_stmt java.lang.StringBuilder = new for = < ++ = call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) call org.apache.lucene.document.Document.add(IndexableField) new call java.lang.StringBuilder.toString() call java.lang.StringBuilder.toString() call java.lang.StringBuilder.toString() call java.lang.StringBuilder.toString() call java.lang.StringBuilder.toString() = call decl List.add() call decl List.add() call decl List.add() call decl List.add() call decl List.add() new call decl List.add() call decl List.add() call decl List.add() call decl List.add() call decl List.add() call org.apache.lucene.index.RandomIndexWriter.addDocuments(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocuments(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocuments(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocuments(Iterable) call org.apache.lucene.index.RandomIndexWriter.addDocuments(Iterable) call org.apache.lucene.index.RandomIndexWriter.close() call org.apache.lucene.index.RandomIndexWriter.close() call org.apache.lucene.index.RandomIndexWriter.close() call org.apache.lucene.index.RandomIndexWriter.close() call org.apache.lucene.index.RandomIndexWriter.close() decl_stmt org.apache.lucene.index.IndexReader = try decl_stmt int = + * for = < ++ decl_stmt java.lang.String = decl_stmt int = call decl Map.get() call decl Map.get() call decl Map.get() call decl Map.get() call decl Map.get() decl_stmt java.util.List < = new <> for : call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() decl_stmt java.lang.StringBuilder = new decl_stmt boolean = for = < ++ if call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.String.equals(Object) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) = else call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) if != - call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) call java.lang.StringBuilder.append(boolean) if call decl List.add() call decl List.add() call decl List.add() call decl List.add() call decl List.add() decl_stmt org.apache.lucene.search.vectorhighlight.FieldQuery = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldTermStack = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldPhraseList = new decl_stmt org.apache.solr.highlight.SimpleFragListBuilder = new decl_stmt org.apache.lucene.search.vectorhighlight.FieldFragList = call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() call SimpleFragListBuilder.createFieldFragList() decl_stmt org.apache.solr.highlight.SimpleFragmentsBuilder = new call SimpleFragmentsBuilder.setDiscreteMultiValueHighlighting() call SimpleFragmentsBuilder.setDiscreteMultiValueHighlighting() call SimpleFragmentsBuilder.setDiscreteMultiValueHighlighting() call SimpleFragmentsBuilder.setDiscreteMultiValueHighlighting() call SimpleFragmentsBuilder.setDiscreteMultiValueHighlighting() decl_stmt java.lang.String = call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call SimpleFragmentsBuilder.createFragments() call decl List.size() call decl List.size() call decl List.size() call decl List.size() call decl List.size() for = < ++ call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() finally call org.apache.lucene.index.IndexReader.close() call org.apache.lucene.index.IndexReader.close() call org.apache.lucene.index.IndexReader.close() call org.apache.lucene.index.IndexReader.close() call org.apache.lucene.index.IndexReader.close() call Directory.close() call Directory.close() call Directory.close() call Directory.close() call Directory.close() String private private < < decl_stmt java.lang.String = if ! new < return