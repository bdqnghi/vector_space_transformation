org.apache.solr.cloud org.apache.lucene.util.LuceneTestCase.Slow import org.apache.solr.SolrTestCaseJ4 import org.apache.solr.common.cloud.ClusterState import org.apache.solr.common.cloud.DocCollection import org.apache.solr.common.cloud.DocRouter import org.apache.solr.common.cloud.Replica import org.apache.solr.common.cloud.Slice import org.apache.solr.common.cloud.SolrZkClient import org.apache.solr.common.cloud.ZkConfigManager import org.apache.solr.common.cloud.ZkNodeProps import org.apache.solr.common.cloud.ZkStateReader import org.apache.solr.common.util.Utils import org.apache.solr.core.CloudConfig import org.apache.solr.core.CoreContainer import org.apache.solr.core.CoreDescriptor import org.apache.solr.handler.admin.CoreAdminHandler import org.apache.solr.handler.component.HttpShardHandlerFactory import org.apache.solr.update.UpdateShardHandler import org.apache.solr.update.UpdateShardHandlerConfig import org.apache.zookeeper.CreateMode import org.junit.AfterClass import org.junit.BeforeClass import org.junit.Test import java.util.Collections import java.util.HashMap import java.util.List import java.util.Map import java.util.concurrent.TimeUnit import class annotation annotation org.apache.solr.cloud.ZkControllerTest super super extends boolean String int public static public static throws public static public static throws ZkTestServer ZkStateReader String public public throws decl_stmt java.lang.String = decl_stmt org.apache.solr.cloud.ZkTestServer = new try call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() decl_stmt org.apache.solr.common.cloud.ZkStateReader = new call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() try call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getZkClient() call org.apache.solr.common.cloud.ZkStateReader.getZkClient() call org.apache.solr.common.cloud.ZkStateReader.getZkClient() call org.apache.solr.common.cloud.ZkStateReader.getZkClient() call org.apache.solr.common.cloud.ZkStateReader.getZkClient() call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) call org.apache.solr.common.cloud.ZkStateReader.getBaseUrlForNodeName(String) finally call org.apache.solr.common.cloud.ZkStateReader.close() call org.apache.solr.common.cloud.ZkStateReader.close() call org.apache.solr.common.cloud.ZkStateReader.close() call org.apache.solr.common.cloud.ZkStateReader.close() call org.apache.solr.common.cloud.ZkStateReader.close() finally call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() String CoreContainer ZkTestServer String ZkNodeProps decl Map SolrZkClient CloudConfig String ZkController public public throws decl_stmt java.lang.String = decl_stmt org.apache.solr.core.CoreContainer = decl_stmt org.apache.solr.cloud.ZkTestServer = new try call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() decl_stmt org.apache.solr.common.cloud.SolrZkClient = new call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() decl_stmt java.lang.String = call org.apache.solr.common.cloud.SolrZkClient.makePath(String,CreateMode,Watcher,boolean) call org.apache.solr.common.cloud.SolrZkClient.makePath(String,CreateMode,Watcher,boolean) call org.apache.solr.common.cloud.SolrZkClient.makePath(String,CreateMode,Watcher,boolean) call org.apache.solr.common.cloud.SolrZkClient.makePath(String,CreateMode,Watcher,boolean) call org.apache.solr.common.cloud.SolrZkClient.makePath(String,CreateMode,Watcher,boolean) + + decl_stmt java.util.Map < = new <> call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() decl_stmt org.apache.solr.common.cloud.ZkNodeProps = new call org.apache.solr.common.cloud.SolrZkClient.makePath(String,CreateMode,Watcher,boolean) call org.apache.solr.common.cloud.SolrZkClient.makePath(String,CreateMode,Watcher,boolean) call org.apache.solr.common.cloud.SolrZkClient.makePath(String,CreateMode,Watcher,boolean) call org.apache.solr.common.cloud.SolrZkClient.makePath(String,CreateMode,Watcher,boolean) call org.apache.solr.common.cloud.SolrZkClient.makePath(String,CreateMode,Watcher,boolean) + + if call org.apache.solr.common.cloud.SolrZkClient.printLayoutToStdOut() call org.apache.solr.common.cloud.SolrZkClient.printLayoutToStdOut() call org.apache.solr.common.cloud.SolrZkClient.printLayoutToStdOut() call org.apache.solr.common.cloud.SolrZkClient.printLayoutToStdOut() call org.apache.solr.common.cloud.SolrZkClient.printLayoutToStdOut() call org.apache.solr.common.cloud.SolrZkClient.close() call org.apache.solr.common.cloud.SolrZkClient.close() call org.apache.solr.common.cloud.SolrZkClient.close() call org.apache.solr.common.cloud.SolrZkClient.close() call org.apache.solr.common.cloud.SolrZkClient.close() = decl_stmt org.apache.solr.core.CloudConfig = new decl_stmt org.apache.solr.cloud.ZkController = new call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() new public < public < return try decl_stmt java.lang.String = call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() finally call org.apache.solr.cloud.ZkController.close() call org.apache.solr.cloud.ZkController.close() call org.apache.solr.cloud.ZkController.close() call org.apache.solr.cloud.ZkController.close() call org.apache.solr.cloud.ZkController.close() finally if != call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() public < public < return CoreContainer CloudConfig ZkTestServer ZkController String public public throws decl_stmt java.lang.String = decl_stmt org.apache.solr.core.CoreContainer = decl_stmt org.apache.solr.cloud.ZkTestServer = new try call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() = decl_stmt org.apache.solr.cloud.ZkController = try decl_stmt org.apache.solr.core.CloudConfig = new = new call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() new public < public < return catch finally if != call org.apache.solr.cloud.ZkController.close() call org.apache.solr.cloud.ZkController.close() call org.apache.solr.cloud.ZkController.close() call org.apache.solr.cloud.ZkController.close() call org.apache.solr.cloud.ZkController.close() finally if != call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() public < public < return decl HashMap Slice decl HashMap CoreContainer DocCollection decl byte decl HashMap ZkTestServer ClusterState Replica long long CloudConfig String ZkController = public = public throws decl_stmt java.lang.String = decl_stmt org.apache.solr.core.CoreContainer = decl_stmt org.apache.solr.cloud.ZkTestServer = new try call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.run() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() call org.apache.solr.cloud.ZkTestServer.getZkHost() = decl_stmt org.apache.solr.cloud.ZkController = try decl_stmt org.apache.solr.core.CloudConfig = new = new call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() call org.apache.solr.cloud.ZkTestServer.getZkAddress() new public < public < return decl_stmt HashMap < = new <> decl_stmt HashMap < = new <> for = <= ++ decl_stmt org.apache.solr.common.cloud.Replica = new + == : == : call decl HashMap.put() call decl HashMap.put() call decl HashMap.put() call decl HashMap.put() call decl HashMap.put() + decl_stmt HashMap < = new <> call decl HashMap.put() call decl HashMap.put() call decl HashMap.put() call decl HashMap.put() call decl HashMap.put() decl_stmt org.apache.solr.common.cloud.Slice = new decl_stmt org.apache.solr.common.cloud.DocCollection = new decl_stmt org.apache.solr.common.cloud.ClusterState = new decl_stmt byte = call org.apache.solr.cloud.ZkController.getZkClient() call org.apache.solr.cloud.ZkController.getZkClient() call org.apache.solr.cloud.ZkController.getZkClient() call org.apache.solr.cloud.ZkController.getZkClient() call org.apache.solr.cloud.ZkController.getZkClient() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() call org.apache.solr.cloud.ZkController.getZkStateReader() decl_stmt long = decl_stmt long = + call org.apache.solr.cloud.ZkController.publishAndWaitForDownStates() call org.apache.solr.cloud.ZkController.publishAndWaitForDownStates() call org.apache.solr.cloud.ZkController.publishAndWaitForDownStates() call org.apache.solr.cloud.ZkController.publishAndWaitForDownStates() call org.apache.solr.cloud.ZkController.publishAndWaitForDownStates() >= finally if != call org.apache.solr.cloud.ZkController.close() call org.apache.solr.cloud.ZkController.close() call org.apache.solr.cloud.ZkController.close() call org.apache.solr.cloud.ZkController.close() call org.apache.solr.cloud.ZkController.close() finally if != call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.core.CoreContainer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() call org.apache.solr.cloud.ZkTestServer.shutdown() public < public < return private private return new public public throws public public public public return public public