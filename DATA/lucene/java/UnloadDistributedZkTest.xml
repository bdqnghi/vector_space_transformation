org.apache.solr.cloud org.apache.lucene.util.LuceneTestCase.Slow import org.apache.solr.SolrTestCaseJ4.SuppressSSL import org.apache.solr.client.solrj.SolrClient import org.apache.solr.client.solrj.SolrQuery import org.apache.solr.client.solrj.SolrServerException import org.apache.solr.client.solrj.impl.HttpSolrClient import org.apache.solr.client.solrj.request.CoreAdminRequest.Create import org.apache.solr.client.solrj.request.CoreAdminRequest.Unload import org.apache.solr.common.SolrInputDocument import org.apache.solr.common.cloud.Replica import org.apache.solr.common.cloud.Slice import org.apache.solr.common.cloud.ZkCoreNodeProps import org.apache.solr.common.cloud.ZkStateReader import org.apache.solr.common.params.ModifiableSolrParams import org.apache.solr.common.params.SolrParams import org.apache.solr.common.util.ExecutorUtil import org.apache.solr.update.DirectUpdateHandler2 import org.apache.solr.util.DefaultSolrThreadFactory import org.apache.solr.util.TimeOut import org.junit.Test import java.io.File import java.io.IOException import java.util.Collection import java.util.Random import java.util.concurrent.SynchronousQueue import java.util.concurrent.ThreadPoolExecutor import java.util.concurrent.TimeUnit import class annotation annotation org.apache.solr.cloud.UnloadDistributedZkTest super super extends protected protected return public public throws if Boolean TimeOut decl Collection private private throws decl_stmt org.apache.solr.util.TimeOut final final = new decl_stmt java.lang.Boolean = while == || != call java.lang.Boolean.booleanValue() call java.lang.Boolean.booleanValue() call java.lang.Boolean.booleanValue() call java.lang.Boolean.booleanValue() call java.lang.Boolean.booleanValue() decl_stmt java.util.Collection final final final < = if call org.apache.solr.util.TimeOut.hasTimedOut() call org.apache.solr.util.TimeOut.hasTimedOut() call org.apache.solr.util.TimeOut.hasTimedOut() call org.apache.solr.util.TimeOut.hasTimedOut() call org.apache.solr.util.TimeOut.hasTimedOut() + + + + + + + + + + + + call decl Collection.size() call decl Collection.size() call decl Collection.size() call decl Collection.size() call decl Collection.size() if == == : call decl Collection.size() call decl Collection.size() call decl Collection.size() call decl Collection.size() call decl Collection.size() = if != for : for : if = Create String Unload String String int SolrClient String String String String boolean private private throws decl_stmt int final final = decl_stmt java.lang.String final final = decl_stmt java.lang.String final final = + decl_stmt java.lang.String final final = + decl_stmt Create = new call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() decl_stmt java.lang.String = call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setNumShards() call Create.setNumShards() call Create.setNumShards() call Create.setNumShards() call Create.setNumShards() decl_stmt org.apache.solr.client.solrj.SolrClient = decl_stmt java.lang.String = try = = new call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() = call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() decl_stmt boolean final final = decl_stmt java.lang.String final final = : decl_stmt java.lang.String final final = : decl_stmt Unload = new call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() = new call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() + Create int SolrInputDocument SolrInputDocument Unload SolrInputDocument long ZkStateReader String String String String String File SolrQuery Random String int ZkCoreNodeProps String long SolrParams SolrClient String private private throws decl_stmt File = decl_stmt java.lang.String = call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() + + + + decl_stmt org.apache.solr.client.solrj.SolrClient = decl_stmt java.lang.String = try = decl_stmt Create = new call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setNumShards() call Create.setNumShards() call Create.setNumShards() call Create.setNumShards() call Create.setNumShards() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() decl_stmt org.apache.solr.common.cloud.ZkStateReader = call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) decl_stmt int = call org.apache.solr.common.cloud.ZkStateReader.getClusterState() call org.apache.solr.common.cloud.ZkStateReader.getClusterState() call org.apache.solr.common.cloud.ZkStateReader.getClusterState() call org.apache.solr.common.cloud.ZkStateReader.getClusterState() call org.apache.solr.common.cloud.ZkStateReader.getClusterState() = decl_stmt java.lang.String = try = decl_stmt Create = new call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() decl_stmt java.lang.String = call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() + + + + call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) = call org.apache.solr.common.cloud.ZkStateReader.getClusterState() call org.apache.solr.common.cloud.ZkStateReader.getClusterState() call org.apache.solr.common.cloud.ZkStateReader.getClusterState() call org.apache.solr.common.cloud.ZkStateReader.getClusterState() call org.apache.solr.common.cloud.ZkStateReader.getClusterState() decl_stmt org.apache.solr.common.cloud.ZkCoreNodeProps = decl_stmt java.util.Random = if call java.util.Random.nextBoolean() call java.util.Random.nextBoolean() call java.util.Random.nextBoolean() call java.util.Random.nextBoolean() call java.util.Random.nextBoolean() try = call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() decl_stmt org.apache.solr.common.SolrInputDocument = - decl_stmt org.apache.solr.common.SolrInputDocument = - decl_stmt org.apache.solr.common.SolrInputDocument = - = decl_stmt java.lang.String = try = decl_stmt Create = new call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() decl_stmt java.lang.String = call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() + + + + call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() = try = + for = < ++ decl_stmt org.apache.solr.common.SolrInputDocument = - try = call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() decl_stmt Unload = new call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() decl_stmt org.apache.solr.common.params.ModifiableSolrParams = call Unload.getParams() call Unload.getParams() call Unload.getParams() call Unload.getParams() call Unload.getParams() decl_stmt int = while call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkStateReader.getLeaderUrl(String,String,int) call org.apache.solr.common.cloud.ZkStateReader.getLeaderUrl(String,String,int) call org.apache.solr.common.cloud.ZkStateReader.getLeaderUrl(String,String,int) call org.apache.solr.common.cloud.ZkStateReader.getLeaderUrl(String,String,int) call org.apache.solr.common.cloud.ZkStateReader.getLeaderUrl(String,String,int) if -- == call org.apache.solr.common.cloud.ZkStateReader.getLeaderRetry(String,String) call org.apache.solr.common.cloud.ZkStateReader.getLeaderRetry(String,String) call org.apache.solr.common.cloud.ZkStateReader.getLeaderRetry(String,String) call org.apache.solr.common.cloud.ZkStateReader.getLeaderRetry(String,String) call org.apache.solr.common.cloud.ZkStateReader.getLeaderRetry(String,String) try = + for = < ++ decl_stmt org.apache.solr.common.SolrInputDocument = - = decl_stmt java.lang.String = try = decl_stmt Create = new call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() decl_stmt java.lang.String = call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() call File.getAbsolutePath() + + + + call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() = try = call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() decl_stmt Unload = new call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() decl_stmt org.apache.solr.common.params.SolrParams = call Unload.getParams() call Unload.getParams() call Unload.getParams() call Unload.getParams() call Unload.getParams() = while call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreUrl() call org.apache.solr.common.cloud.ZkStateReader.getLeaderUrl(String,String,int) call org.apache.solr.common.cloud.ZkStateReader.getLeaderUrl(String,String,int) call org.apache.solr.common.cloud.ZkStateReader.getLeaderUrl(String,String,int) call org.apache.solr.common.cloud.ZkStateReader.getLeaderUrl(String,String,int) call org.apache.solr.common.cloud.ZkStateReader.getLeaderUrl(String,String,int) if -- == call org.apache.solr.common.cloud.ZkStateReader.getLeaderRetry(String,String) call org.apache.solr.common.cloud.ZkStateReader.getLeaderRetry(String,String) call org.apache.solr.common.cloud.ZkStateReader.getLeaderRetry(String,String) call org.apache.solr.common.cloud.ZkStateReader.getLeaderRetry(String,String) call org.apache.solr.common.cloud.ZkStateReader.getLeaderRetry(String,String) = try = call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() call org.apache.solr.common.cloud.ZkCoreNodeProps.getBaseUrl() decl_stmt Create = new call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call Create.setCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call org.apache.solr.common.cloud.ZkCoreNodeProps.getCoreName() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setCollection() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() call Create.setDataDir() decl_stmt long try = + decl_stmt org.apache.solr.client.solrj.SolrQuery = new call long.set() call long.set() call long.set() call long.set() call long.set() = try = + decl_stmt org.apache.solr.client.solrj.SolrQuery = new call long.set() call long.set() call long.set() call long.set() call long.set() = try = + decl_stmt org.apache.solr.client.solrj.SolrQuery = new call long.set() call long.set() call long.set() call long.set() call long.set() decl_stmt long = int String Unload SolrClient int ThreadPoolExecutor private private throws decl_stmt org.apache.solr.client.solrj.SolrClient = decl_stmt java.lang.String = try final final = decl_stmt int = decl_stmt java.util.concurrent.ThreadPoolExecutor = new new < new try finally = new new < new try for = < ++ decl_stmt int final final = call java.util.concurrent.ThreadPoolExecutor.execute(Runnable) call java.util.concurrent.ThreadPoolExecutor.execute(Runnable) call java.util.concurrent.ThreadPoolExecutor.execute(Runnable) call java.util.concurrent.ThreadPoolExecutor.execute(Runnable) call java.util.concurrent.ThreadPoolExecutor.execute(Runnable) decl_stmt Unload = new call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() call Unload.setCoreName() + try catch throw new finally