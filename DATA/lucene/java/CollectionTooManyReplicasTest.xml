org.apache.solr.cloud java.util.ArrayList import java.util.List import java.util.Map import java.util.Properties import org.apache.commons.lang.StringUtils import org.apache.lucene.util.LuceneTestCase.Slow import org.apache.solr.client.solrj.embedded.JettySolrRunner import org.apache.solr.client.solrj.impl.HttpSolrClient import org.apache.solr.client.solrj.request.CollectionAdminRequest import org.apache.solr.client.solrj.response.CollectionAdminResponse import org.apache.solr.common.cloud.Replica import org.apache.solr.common.cloud.Slice import org.apache.solr.common.cloud.SolrZkClient import org.apache.solr.common.cloud.ZkStateReader import org.apache.solr.common.util.NamedList import org.apache.zookeeper.KeeperException import org.junit.Test import class annotation org.apache.solr.cloud.CollectionTooManyReplicasTest super super extends String String Properties decl CollectionAdminRequest decl AddReplica decl AddReplica decl CollectionAdminRequest decl CollectionAdminRequest decl Create CollectionAdminResponse = public = public throws decl_stmt java.lang.String = decl_stmt Create = new decl_stmt org.apache.solr.client.solrj.response.CollectionAdminResponse = call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl Create.getStatus() call decl Create.getStatus() call decl Create.getStatus() call decl Create.getStatus() call decl Create.getStatus() call decl Create.isSuccess() call decl Create.isSuccess() call decl Create.isSuccess() call decl Create.isSuccess() call decl Create.isSuccess() decl_stmt java.lang.String = decl_stmt AddReplica = new = call String.process() call String.process() call String.process() call String.process() call String.process() call decl Create.getStatus() call decl Create.getStatus() call decl Create.getStatus() call decl Create.getStatus() call decl Create.getStatus() decl_stmt AddReplica = new = call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl Create.getStatus() call decl Create.getStatus() call decl Create.getStatus() call decl Create.getStatus() call decl Create.getStatus() try call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() catch decl_stmt java.util.Properties = new call decl AddReplica.setProperty() call decl AddReplica.setProperty() call decl AddReplica.setProperty() call decl AddReplica.setProperty() call decl AddReplica.setProperty() call String.setProperties() call String.setProperties() call String.setProperties() call String.setProperties() call String.setProperties() = call String.process() call String.process() call String.process() call String.process() call String.process() call decl Create.getStatus() call decl Create.getStatus() call decl Create.getStatus() call decl Create.getStatus() call decl Create.getStatus() decl_stmt org.apache.solr.common.cloud.ZkStateReader = call decl CollectionAdminRequest.forceUpdateCollection() call decl CollectionAdminRequest.forceUpdateCollection() call decl CollectionAdminRequest.forceUpdateCollection() call decl CollectionAdminRequest.forceUpdateCollection() call decl CollectionAdminRequest.forceUpdateCollection() decl_stmt org.apache.solr.common.cloud.Slice = call decl CollectionAdminRequest.getClusterState() call decl CollectionAdminRequest.getClusterState() call decl CollectionAdminRequest.getClusterState() call decl CollectionAdminRequest.getClusterState() call decl CollectionAdminRequest.getClusterState() decl_stmt org.apache.solr.common.cloud.Replica = for : call decl AddReplica.getReplicas() call decl AddReplica.getReplicas() call decl AddReplica.getReplicas() call decl AddReplica.getReplicas() call decl AddReplica.getReplicas() if = break call Properties.getNodeName() call Properties.getNodeName() call Properties.getNodeName() call Properties.getNodeName() call Properties.getNodeName() call decl AddReplica.getReplicas() call decl AddReplica.getReplicas() call decl AddReplica.getReplicas() call decl AddReplica.getReplicas() call decl AddReplica.getReplicas() try call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() catch String decl List decl CollectionAdminRequest decl Create decl NamedList decl CreateShard CollectionAdminResponse decl CollectionAdminRequest = public = public throws decl_stmt java.lang.String = decl_stmt Create = new decl_stmt org.apache.solr.common.util.NamedList < = call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl Create.get() call decl Create.get() call decl Create.get() call decl Create.get() call decl Create.get() != decl_stmt CreateShard = new decl_stmt org.apache.solr.client.solrj.response.CollectionAdminResponse = call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl CollectionAdminRequest.getStatus() call decl CollectionAdminRequest.getStatus() call decl CollectionAdminRequest.getStatus() call decl CollectionAdminRequest.getStatus() call decl CollectionAdminRequest.getStatus() = new = call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl CollectionAdminRequest.getStatus() call decl CollectionAdminRequest.getStatus() call decl CollectionAdminRequest.getStatus() call decl CollectionAdminRequest.getStatus() call decl CollectionAdminRequest.getStatus() = new try call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() catch decl_stmt java.util.List < = = new = call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl CollectionAdminRequest.getStatus() call decl CollectionAdminRequest.getStatus() call decl CollectionAdminRequest.getStatus() call decl CollectionAdminRequest.getStatus() call decl CollectionAdminRequest.getStatus() = new try call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() call decl NamedList.process() catch decl_stmt org.apache.solr.common.cloud.ZkStateReader = call CollectionAdminResponse.forceUpdateCollection() call CollectionAdminResponse.forceUpdateCollection() call CollectionAdminResponse.forceUpdateCollection() call CollectionAdminResponse.forceUpdateCollection() call CollectionAdminResponse.forceUpdateCollection() decl_stmt java.util.Map < = call CollectionAdminResponse.getClusterState() call CollectionAdminResponse.getClusterState() call CollectionAdminResponse.getClusterState() call CollectionAdminResponse.getClusterState() call CollectionAdminResponse.getClusterState() call decl List.size() call decl List.size() call decl List.size() call decl List.size() call decl List.size() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() String decl NamedList decl List JettySolrRunner decl CollectionAdminRequest decl Create decl CollectionAdminRequest decl List decl List = public = public throws decl_stmt java.lang.String = decl_stmt Create = new decl_stmt org.apache.solr.common.util.NamedList < = call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl Create.get() call decl Create.get() call decl Create.get() call decl Create.get() call decl Create.get() != try = new decl_stmt java.util.List < = decl_stmt org.apache.solr.client.solrj.embedded.JettySolrRunner = call decl List.stop() call decl List.stop() call decl List.stop() call decl List.stop() call decl List.stop() decl_stmt java.util.List < = for = < ++ = if call JettySolrRunner.size() call JettySolrRunner.size() call JettySolrRunner.size() call JettySolrRunner.size() call JettySolrRunner.size() != call decl NamedList.size() call decl NamedList.size() call decl NamedList.size() call decl NamedList.size() call decl NamedList.size() break decl_stmt java.util.List < = new <> call decl List.removeAll() call decl List.removeAll() call decl List.removeAll() call decl List.removeAll() call decl List.removeAll() call decl NamedList.removeAll() call decl NamedList.removeAll() call decl NamedList.removeAll() call decl NamedList.removeAll() call decl NamedList.removeAll() decl_stmt AddReplica = new call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() try call decl List.process() call decl List.process() call decl List.process() call decl List.process() call decl List.process() catch decl_stmt CreateShard = new call decl List.get() call decl List.get() call decl List.get() call decl List.get() call decl List.get() try call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() call decl CollectionAdminRequest.process() catch decl List Slice ZkStateReader private < private < throws decl_stmt org.apache.solr.common.cloud.ZkStateReader = call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) call org.apache.solr.common.cloud.ZkStateReader.forceUpdateCollection(String) decl_stmt org.apache.solr.common.cloud.Slice = call org.apache.solr.common.cloud.ZkStateReader.getClusterState() call org.apache.solr.common.cloud.ZkStateReader.getClusterState() call org.apache.solr.common.cloud.ZkStateReader.getClusterState() call org.apache.solr.common.cloud.ZkStateReader.getClusterState() call org.apache.solr.common.cloud.ZkStateReader.getClusterState() decl_stmt java.util.List < = new <> for : call org.apache.solr.common.cloud.Slice.getReplicas() call org.apache.solr.common.cloud.Slice.getReplicas() call org.apache.solr.common.cloud.Slice.getReplicas() call org.apache.solr.common.cloud.Slice.getReplicas() call org.apache.solr.common.cloud.Slice.getReplicas() call decl List.add() call decl List.add() call decl List.add() call decl List.add() call decl List.add() call decl List.size() call decl List.size() call decl List.size() call decl List.size() call decl List.size() > return