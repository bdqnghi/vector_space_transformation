org.apache.solr.cloud.hdfs java.io.File import java.io.IOException import java.lang.invoke.MethodHandles import java.net.URI import java.util.Locale import java.util.Map import java.util.Timer import java.util.TimerTask import java.util.concurrent.ConcurrentHashMap import org.apache.hadoop.conf.Configuration import org.apache.hadoop.fs.FSDataOutputStream import org.apache.hadoop.fs.FileSystem import org.apache.hadoop.fs.Path import org.apache.hadoop.hdfs.MiniDFSCluster import org.apache.hadoop.hdfs.MiniDFSNNTopology import org.apache.hadoop.hdfs.server.namenode.NameNodeAdapter import org.apache.hadoop.hdfs.server.namenode.ha.HATestUtil import org.apache.lucene.util.LuceneTestCase import org.apache.solr.SolrTestCaseJ4 import org.apache.solr.common.util.IOUtils import org.apache.solr.core.DirectoryFactory import org.apache.solr.util.HdfsUtil import org.slf4j.Logger import org.slf4j.LoggerFactory import class org.apache.solr.cloud.hdfs.HdfsTestUtil boolean FSDataOutputStream Logger decl Map Locale FileSystem String public static public static throws return public static public static throws return MiniDFSCluster int URI int int Timer Configuration Configuration Path public static public static throws = if ! = decl_stmt int = decl_stmt Configuration = new call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() + + call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() call Configuration.set() + + call Configuration.setBoolean() call Configuration.setBoolean() call Configuration.setBoolean() call Configuration.setBoolean() call Configuration.setBoolean() + + + + + + + + decl_stmt MiniDFSCluster final final if ! = new else = new decl_stmt Configuration = = call MiniDFSCluster.waitActive() call MiniDFSCluster.waitActive() call MiniDFSCluster.waitActive() call MiniDFSCluster.waitActive() call MiniDFSCluster.waitActive() if call MiniDFSCluster.transitionToActive() call MiniDFSCluster.transitionToActive() call MiniDFSCluster.transitionToActive() call MiniDFSCluster.transitionToActive() call MiniDFSCluster.transitionToActive() decl_stmt int = if && == call MiniDFSCluster.getNameNode() call MiniDFSCluster.getNameNode() call MiniDFSCluster.getNameNode() call MiniDFSCluster.getNameNode() call MiniDFSCluster.getNameNode() decl_stmt int = decl_stmt org.apache.solr.util.stats.Timer = new call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call java.util.Timer.schedule(TimerTask,Date,long) call java.util.Timer.schedule(TimerTask,Date,long) call java.util.Timer.schedule(TimerTask,Date,long) call java.util.Timer.schedule(TimerTask,Date,long) call java.util.Timer.schedule(TimerTask,Date,long) new public public call MiniDFSCluster.getNameNode() call MiniDFSCluster.getNameNode() call MiniDFSCluster.getNameNode() call MiniDFSCluster.getNameNode() call MiniDFSCluster.getNameNode() else if && == decl_stmt int = decl_stmt org.apache.solr.util.stats.Timer = new call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call java.util.Timer.schedule(TimerTask,Date,long) call java.util.Timer.schedule(TimerTask,Date,long) call java.util.Timer.schedule(TimerTask,Date,long) call java.util.Timer.schedule(TimerTask,Date,long) call java.util.Timer.schedule(TimerTask,Date,long) new public public else decl_stmt java.net.URI = call MiniDFSCluster.getURI() call MiniDFSCluster.getURI() call MiniDFSCluster.getURI() call MiniDFSCluster.getURI() call MiniDFSCluster.getURI() decl_stmt java.nio.file.Path = new call java.net.URI.toString(String,String,String,String,String,int,String,String,String) call java.net.URI.toString(String,String,String,String,String,int,String,String,String) call java.net.URI.toString(String,String,String,String,String,int,String,String,String) call java.net.URI.toString(String,String,String,String,String,int,String,String,String) call java.net.URI.toString(String,String,String,String,String,int,String,String,String) + = call java.nio.file.Path.toUri() call java.nio.file.Path.toUri() call java.nio.file.Path.toUri() call java.nio.file.Path.toUri() call java.nio.file.Path.toUri() = call FileSystem.create() call FileSystem.create() call FileSystem.create() call FileSystem.create() call FileSystem.create() return public public public public Configuration public static public static if > decl_stmt Configuration = new return else return new Timer public static public static throws if != if != if != decl_stmt org.apache.solr.util.stats.Timer = call decl Map.remove() call decl Map.remove() call decl Map.remove() call decl Map.remove() call decl Map.remove() if != call java.util.Timer.cancel() call java.util.Timer.cancel() call java.util.Timer.cancel() call java.util.Timer.cancel() call java.util.Timer.cancel() try catch call Logger.warn() call Logger.warn() call Logger.warn() call Logger.warn() call Logger.warn() if != String public static public static throws if == return decl_stmt java.lang.String = + new return + String URI public static public static if > decl_stmt java.lang.String = return + else decl_stmt java.net.URI = return call java.net.URI.toString(String,String,String,String,String,int,String,String,String) call java.net.URI.toString(String,String,String,String,String,int,String,String,String) call java.net.URI.toString(String,String,String,String,String,int,String,String,String) call java.net.URI.toString(String,String,String,String,String,int,String,String,String) call java.net.URI.toString(String,String,String,String,String,int,String,String,String)