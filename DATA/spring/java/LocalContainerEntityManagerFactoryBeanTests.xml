org.springframework.orm.jpa java.util.Map import java.util.Properties import javax.persistence.EntityManager import javax.persistence.EntityManagerFactory import javax.persistence.EntityTransaction import javax.persistence.OptimisticLockException import javax.persistence.PersistenceException import javax.persistence.spi.PersistenceProvider import javax.persistence.spi.PersistenceUnitInfo import javax.persistence.spi.PersistenceUnitTransactionType import javax.persistence.spi.ProviderUtil import org.junit.Test import org.springframework.beans.factory.support.DefaultListableBeanFactory import org.springframework.dao.DataAccessException import org.springframework.dao.OptimisticLockingFailureException import org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver import org.springframework.orm.jpa.persistenceunit.MutablePersistenceUnitInfo import org.springframework.transaction.TransactionStatus import org.springframework.transaction.interceptor.DefaultTransactionAttribute import org.springframework.util.SerializationTestUtils import static static org.junit.Assert.* import static static org.mockito.BDDMockito.* import class annotation org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBeanTests super super extends PersistenceUnitInfo Map public public throws LocalContainerEntityManagerFactoryBean DataAccessException RuntimeException PersistenceException public public throws decl_stmt org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean = call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getJpaDialect() call LocalContainerEntityManagerFactoryBean.getJpaDialect() call LocalContainerEntityManagerFactoryBean.getJpaDialect() call LocalContainerEntityManagerFactoryBean.getJpaDialect() call LocalContainerEntityManagerFactoryBean.getJpaDialect() decl_stmt RuntimeException = new decl_stmt PersistenceException = new call LocalContainerEntityManagerFactoryBean.translateExceptionIfPossible() call LocalContainerEntityManagerFactoryBean.translateExceptionIfPossible() call LocalContainerEntityManagerFactoryBean.translateExceptionIfPossible() call LocalContainerEntityManagerFactoryBean.translateExceptionIfPossible() call LocalContainerEntityManagerFactoryBean.translateExceptionIfPossible() decl_stmt DataAccessException = call LocalContainerEntityManagerFactoryBean.translateExceptionIfPossible() call LocalContainerEntityManagerFactoryBean.translateExceptionIfPossible() call LocalContainerEntityManagerFactoryBean.translateExceptionIfPossible() call LocalContainerEntityManagerFactoryBean.translateExceptionIfPossible() call LocalContainerEntityManagerFactoryBean.translateExceptionIfPossible() call DataAccessException.getCause() call DataAccessException.getCause() call DataAccessException.getCause() call DataAccessException.getCause() call DataAccessException.getCause() LocalContainerEntityManagerFactoryBean DefaultListableBeanFactory EntityManagerFactory public public throws decl_stmt org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean = decl_stmt EntityManagerFactory = call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call EntityManagerFactory.equals() call EntityManagerFactory.equals() call EntityManagerFactory.equals() call EntityManagerFactory.equals() call EntityManagerFactory.equals() decl_stmt org.springframework.beans.factory.support.DefaultListableBeanFactory = new call org.springframework.beans.factory.support.DefaultListableBeanFactory.setSerializationId(String) call org.springframework.beans.factory.support.DefaultListableBeanFactory.setSerializationId(String) call org.springframework.beans.factory.support.DefaultListableBeanFactory.setSerializationId(String) call org.springframework.beans.factory.support.DefaultListableBeanFactory.setSerializationId(String) call org.springframework.beans.factory.support.DefaultListableBeanFactory.setSerializationId(String) call org.springframework.beans.factory.support.DefaultListableBeanFactory.registerSingleton(String,Object) call org.springframework.beans.factory.support.DefaultListableBeanFactory.registerSingleton(String,Object) call org.springframework.beans.factory.support.DefaultListableBeanFactory.registerSingleton(String,Object) call org.springframework.beans.factory.support.DefaultListableBeanFactory.registerSingleton(String,Object) call org.springframework.beans.factory.support.DefaultListableBeanFactory.registerSingleton(String,Object) call LocalContainerEntityManagerFactoryBean.setBeanFactory() call LocalContainerEntityManagerFactoryBean.setBeanFactory() call LocalContainerEntityManagerFactoryBean.setBeanFactory() call LocalContainerEntityManagerFactoryBean.setBeanFactory() call LocalContainerEntityManagerFactoryBean.setBeanFactory() call LocalContainerEntityManagerFactoryBean.setBeanName() call LocalContainerEntityManagerFactoryBean.setBeanName() call LocalContainerEntityManagerFactoryBean.setBeanName() call LocalContainerEntityManagerFactoryBean.setBeanName() call LocalContainerEntityManagerFactoryBean.setBeanName() LocalContainerEntityManagerFactoryBean EntityManager EntityManager EntityManagerFactory Object public public throws decl_stmt java.lang.Object = new decl_stmt EntityManager = decl_stmt org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean = decl_stmt EntityManagerFactory = call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() decl_stmt EntityManager = call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManager.contains() call EntityManager.contains() call EntityManager.contains() call EntityManager.contains() call EntityManager.contains() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() LocalContainerEntityManagerFactoryBean EntityManager EntityManagerFactory EntityManager EntityManager Object EntityTransaction JpaTransactionManager TransactionStatus public public throws decl_stmt java.lang.Object = new decl_stmt EntityTransaction = decl_stmt EntityManager = call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() new decl_stmt EntityManager = call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() decl_stmt org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean = decl_stmt org.springframework.orm.jpa.JpaTransactionManager = new call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() decl_stmt org.springframework.transaction.TransactionStatus = call JpaTransactionManager.getTransaction() call JpaTransactionManager.getTransaction() call JpaTransactionManager.getTransaction() call JpaTransactionManager.getTransaction() call JpaTransactionManager.getTransaction() new decl_stmt EntityManagerFactory = call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() decl_stmt EntityManager = call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManager.joinTransaction() call EntityManager.joinTransaction() call EntityManager.joinTransaction() call EntityManager.joinTransaction() call EntityManager.joinTransaction() call EntityManager.contains() call EntityManager.contains() call EntityManager.contains() call EntityManager.contains() call EntityManager.contains() call JpaTransactionManager.commit() call JpaTransactionManager.commit() call JpaTransactionManager.commit() call JpaTransactionManager.commit() call JpaTransactionManager.commit() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() LocalContainerEntityManagerFactoryBean EntityManager EntityManagerFactory EntityManager EntityManager Object EntityTransaction JpaTransactionManager TransactionStatus public public throws decl_stmt java.lang.Object = new decl_stmt EntityTransaction = new decl_stmt EntityManager = call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() new decl_stmt EntityManager = call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() decl_stmt org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean = decl_stmt org.springframework.orm.jpa.JpaTransactionManager = new call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() decl_stmt org.springframework.transaction.TransactionStatus = call JpaTransactionManager.getTransaction() call JpaTransactionManager.getTransaction() call JpaTransactionManager.getTransaction() call JpaTransactionManager.getTransaction() call JpaTransactionManager.getTransaction() new decl_stmt EntityManagerFactory = call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() decl_stmt EntityManager = call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManager.joinTransaction() call EntityManager.joinTransaction() call EntityManager.joinTransaction() call EntityManager.joinTransaction() call EntityManager.joinTransaction() call EntityManager.contains() call EntityManager.contains() call EntityManager.contains() call EntityManager.contains() call EntityManager.contains() try call JpaTransactionManager.commit() call JpaTransactionManager.commit() call JpaTransactionManager.commit() call JpaTransactionManager.commit() call JpaTransactionManager.commit() catch call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() LocalContainerEntityManagerFactoryBean EntityManager EntityManagerFactory MutablePersistenceUnitInfo EntityManager EntityManager Object JpaTransactionManager TransactionStatus public public throws decl_stmt java.lang.Object = new decl_stmt EntityManager = call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() new decl_stmt EntityManager = decl_stmt org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean = decl_stmt org.springframework.orm.jpa.persistenceunit.MutablePersistenceUnitInfo = call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.getPersistenceUnitInfo() call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.getPersistenceUnitInfo() call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.getPersistenceUnitInfo() call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.getPersistenceUnitInfo() call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.getPersistenceUnitInfo() call org.springframework.orm.jpa.persistenceunit.MutablePersistenceUnitInfo.setTransactionType(PersistenceUnitTransactionType) call org.springframework.orm.jpa.persistenceunit.MutablePersistenceUnitInfo.setTransactionType(PersistenceUnitTransactionType) call org.springframework.orm.jpa.persistenceunit.MutablePersistenceUnitInfo.setTransactionType(PersistenceUnitTransactionType) call org.springframework.orm.jpa.persistenceunit.MutablePersistenceUnitInfo.setTransactionType(PersistenceUnitTransactionType) call org.springframework.orm.jpa.persistenceunit.MutablePersistenceUnitInfo.setTransactionType(PersistenceUnitTransactionType) decl_stmt org.springframework.orm.jpa.JpaTransactionManager = new call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call org.springframework.orm.jpa.JpaTransactionManager.setEntityManagerFactory(EntityManagerFactory) call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() decl_stmt org.springframework.transaction.TransactionStatus = call JpaTransactionManager.getTransaction() call JpaTransactionManager.getTransaction() call JpaTransactionManager.getTransaction() call JpaTransactionManager.getTransaction() call JpaTransactionManager.getTransaction() new decl_stmt EntityManagerFactory = call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() call LocalContainerEntityManagerFactoryBean.getObject() decl_stmt EntityManager = call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManagerFactory.createEntityManager() call EntityManager.joinTransaction() call EntityManager.joinTransaction() call EntityManager.joinTransaction() call EntityManager.joinTransaction() call EntityManager.joinTransaction() call EntityManager.contains() call EntityManager.contains() call EntityManager.contains() call EntityManager.contains() call EntityManager.contains() call JpaTransactionManager.commit() call JpaTransactionManager.commit() call JpaTransactionManager.commit() call JpaTransactionManager.commit() call JpaTransactionManager.commit() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() call LocalContainerEntityManagerFactoryBean.destroy() LocalContainerEntityManagerFactoryBean public public throws decl_stmt org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean = return public public throws try catch LocalContainerEntityManagerFactoryBean protected protected throws = = decl_stmt org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean = new call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceUnitName(String) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceUnitName(String) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceUnitName(String) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceUnitName(String) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceUnitName(String) call LocalContainerEntityManagerFactoryBean.setPersistenceProviderClass() call LocalContainerEntityManagerFactoryBean.setPersistenceProviderClass() call LocalContainerEntityManagerFactoryBean.setPersistenceProviderClass() call LocalContainerEntityManagerFactoryBean.setPersistenceProviderClass() call LocalContainerEntityManagerFactoryBean.setPersistenceProviderClass() if != call LocalContainerEntityManagerFactoryBean.setJpaProperties() call LocalContainerEntityManagerFactoryBean.setJpaProperties() call LocalContainerEntityManagerFactoryBean.setJpaProperties() call LocalContainerEntityManagerFactoryBean.setJpaProperties() call LocalContainerEntityManagerFactoryBean.setJpaProperties() call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setLoadTimeWeaver(LoadTimeWeaver) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setLoadTimeWeaver(LoadTimeWeaver) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setLoadTimeWeaver(LoadTimeWeaver) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setLoadTimeWeaver(LoadTimeWeaver) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setLoadTimeWeaver(LoadTimeWeaver) new call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceXmlLocation(String) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceXmlLocation(String) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceXmlLocation(String) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceXmlLocation(String) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceXmlLocation(String) call LocalContainerEntityManagerFactoryBean.afterPropertiesSet() call LocalContainerEntityManagerFactoryBean.afterPropertiesSet() call LocalContainerEntityManagerFactoryBean.afterPropertiesSet() call LocalContainerEntityManagerFactoryBean.afterPropertiesSet() call LocalContainerEntityManagerFactoryBean.afterPropertiesSet() call PersistenceUnitInfo.getPersistenceUnitName() call PersistenceUnitInfo.getPersistenceUnitName() call PersistenceUnitInfo.getPersistenceUnitName() call PersistenceUnitInfo.getPersistenceUnitName() call PersistenceUnitInfo.getPersistenceUnitName() if != return LocalContainerEntityManagerFactoryBean String public public throws decl_stmt org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean = new decl_stmt java.lang.String = call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceUnitName(String) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceUnitName(String) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceUnitName(String) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceUnitName(String) call org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.setPersistenceUnitName(String) call LocalContainerEntityManagerFactoryBean.setPersistenceProviderClass() call LocalContainerEntityManagerFactoryBean.setPersistenceProviderClass() call LocalContainerEntityManagerFactoryBean.setPersistenceProviderClass() call LocalContainerEntityManagerFactoryBean.setPersistenceProviderClass() call LocalContainerEntityManagerFactoryBean.setPersistenceProviderClass() try call LocalContainerEntityManagerFactoryBean.afterPropertiesSet() call LocalContainerEntityManagerFactoryBean.afterPropertiesSet() call LocalContainerEntityManagerFactoryBean.afterPropertiesSet() call LocalContainerEntityManagerFactoryBean.afterPropertiesSet() call LocalContainerEntityManagerFactoryBean.afterPropertiesSet() catch public public = = return public public throw new public public throw new public public throw new public public throw new public public public public public public public public throw new public public return public public return