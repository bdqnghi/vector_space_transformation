org.springframework.http.converter.xml java.io.IOException import java.io.InputStreamReader import java.io.StringReader import java.nio.charset.Charset import javax.xml.parsers.DocumentBuilderFactory import javax.xml.stream.XMLStreamException import javax.xml.stream.XMLStreamReader import javax.xml.transform.Source import javax.xml.transform.dom.DOMSource import javax.xml.transform.sax.SAXSource import javax.xml.transform.stax.StAXSource import javax.xml.transform.stream.StreamSource import org.junit.Before import org.junit.Rule import org.junit.Test import org.junit.rules.ExpectedException import org.w3c.dom.Document import org.w3c.dom.Element import org.xml.sax.InputSource import org.xml.sax.SAXException import org.xml.sax.XMLReader import org.xml.sax.helpers.DefaultHandler import org.springframework.core.io.ClassPathResource import org.springframework.core.io.Resource import org.springframework.http.MediaType import org.springframework.http.MockHttpInputMessage import org.springframework.http.MockHttpOutputMessage import org.springframework.http.converter.HttpMessageNotReadableException import org.springframework.util.FileCopyUtils import static static org.custommonkey.xmlunit.XMLAssert.* import static static org.junit.Assert.assertEquals import static static org.junit.Assert.assertNotEquals import static static org.junit.Assert.assertTrue import class org.springframework.http.converter.xml.SourceHttpMessageConverterTests String ExpectedException decl SourceHttpMessageConverter String Resource public public throws = new < decl_stmt org.springframework.core.io.Resource = new = + + + call org.springframework.core.io.Resource.getURI() call org.springframework.core.io.Resource.getURI() call org.springframework.core.io.Resource.getURI() call org.springframework.core.io.Resource.getURI() call org.springframework.core.io.Resource.getURI() + public public call decl SourceHttpMessageConverter.canRead() call decl SourceHttpMessageConverter.canRead() call decl SourceHttpMessageConverter.canRead() call decl SourceHttpMessageConverter.canRead() call decl SourceHttpMessageConverter.canRead() new call decl SourceHttpMessageConverter.canRead() call decl SourceHttpMessageConverter.canRead() call decl SourceHttpMessageConverter.canRead() call decl SourceHttpMessageConverter.canRead() call decl SourceHttpMessageConverter.canRead() new public public call decl SourceHttpMessageConverter.canWrite() call decl SourceHttpMessageConverter.canWrite() call decl SourceHttpMessageConverter.canWrite() call decl SourceHttpMessageConverter.canWrite() call decl SourceHttpMessageConverter.canWrite() new call decl SourceHttpMessageConverter.canWrite() call decl SourceHttpMessageConverter.canWrite() call decl SourceHttpMessageConverter.canWrite() call decl SourceHttpMessageConverter.canWrite() call decl SourceHttpMessageConverter.canWrite() new call decl SourceHttpMessageConverter.canWrite() call decl SourceHttpMessageConverter.canWrite() call decl SourceHttpMessageConverter.canWrite() call decl SourceHttpMessageConverter.canWrite() call decl SourceHttpMessageConverter.canWrite() Document MockHttpInputMessage DOMSource public public throws decl_stmt org.springframework.http.MockHttpInputMessage = new call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() new decl_stmt DOMSource = call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() decl_stmt javax.swing.text.Document = call DOMSource.getNode() call DOMSource.getNode() call DOMSource.getNode() call DOMSource.getNode() call DOMSource.getNode() call Document.getDocumentElement() call Document.getDocumentElement() call Document.getDocumentElement() call Document.getDocumentElement() call Document.getDocumentElement() Document MockHttpInputMessage DOMSource public public throws decl_stmt org.springframework.http.MockHttpInputMessage = new call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() new call decl SourceHttpMessageConverter.setSupportDtd() call decl SourceHttpMessageConverter.setSupportDtd() call decl SourceHttpMessageConverter.setSupportDtd() call decl SourceHttpMessageConverter.setSupportDtd() call decl SourceHttpMessageConverter.setSupportDtd() decl_stmt DOMSource = call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() decl_stmt javax.swing.text.Document = call DOMSource.getNode() call DOMSource.getNode() call DOMSource.getNode() call DOMSource.getNode() call DOMSource.getNode() call Document.getDocumentElement() call Document.getDocumentElement() call Document.getDocumentElement() call Document.getDocumentElement() call Document.getDocumentElement() call Document.getDocumentElement() call Document.getDocumentElement() call Document.getDocumentElement() call Document.getDocumentElement() call Document.getDocumentElement() String MockHttpInputMessage public public throws decl_stmt java.lang.String = + + + + + + + + + + + + + + decl_stmt org.springframework.http.MockHttpInputMessage = new call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) InputSource String MockHttpInputMessage SAXSource public public throws decl_stmt org.springframework.http.MockHttpInputMessage = new call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() new decl_stmt SAXSource = call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() decl_stmt InputSource = call SAXSource.getInputSource() call SAXSource.getInputSource() call SAXSource.getInputSource() call SAXSource.getInputSource() call SAXSource.getInputSource() decl_stmt java.lang.String = new call InputSource.getByteStream() call InputSource.getByteStream() call InputSource.getByteStream() call InputSource.getByteStream() call InputSource.getByteStream() InputSource String XMLReader MockHttpInputMessage SAXSource public public throws decl_stmt org.springframework.http.MockHttpInputMessage = new call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() new call decl SourceHttpMessageConverter.setSupportDtd() call decl SourceHttpMessageConverter.setSupportDtd() call decl SourceHttpMessageConverter.setSupportDtd() call decl SourceHttpMessageConverter.setSupportDtd() call decl SourceHttpMessageConverter.setSupportDtd() decl_stmt SAXSource = call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() decl_stmt InputSource = call SAXSource.getInputSource() call SAXSource.getInputSource() call SAXSource.getInputSource() call SAXSource.getInputSource() call SAXSource.getInputSource() decl_stmt XMLReader = call SAXSource.getXMLReader() call SAXSource.getXMLReader() call SAXSource.getXMLReader() call SAXSource.getXMLReader() call SAXSource.getXMLReader() call XMLReader.setContentHandler() call XMLReader.setContentHandler() call XMLReader.setContentHandler() call XMLReader.setContentHandler() call XMLReader.setContentHandler() new public public throws decl_stmt java.lang.String = new call XMLReader.parse() call XMLReader.parse() call XMLReader.parse() call XMLReader.parse() call XMLReader.parse() String public public throws decl_stmt java.lang.String = new String InputSource XMLReader MockHttpInputMessage SAXSource public public throws decl_stmt java.lang.String = + + + + + + + + + + + + + + decl_stmt org.springframework.http.MockHttpInputMessage = new call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) decl_stmt SAXSource = decl_stmt InputSource = call SAXSource.getInputSource() call SAXSource.getInputSource() call SAXSource.getInputSource() call SAXSource.getInputSource() call SAXSource.getInputSource() decl_stmt XMLReader = call SAXSource.getXMLReader() call SAXSource.getXMLReader() call SAXSource.getXMLReader() call SAXSource.getXMLReader() call SAXSource.getXMLReader() call XMLReader.parse() call XMLReader.parse() call XMLReader.parse() call XMLReader.parse() call XMLReader.parse() XMLStreamReader String MockHttpInputMessage StAXSource public public throws decl_stmt org.springframework.http.MockHttpInputMessage = new call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() new decl_stmt StAXSource = call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() decl_stmt XMLStreamReader = call StAXSource.getXMLStreamReader() call StAXSource.getXMLStreamReader() call StAXSource.getXMLStreamReader() call StAXSource.getXMLStreamReader() call StAXSource.getXMLStreamReader() call XMLStreamReader.hasNext() call XMLStreamReader.hasNext() call XMLStreamReader.hasNext() call XMLStreamReader.hasNext() call XMLStreamReader.hasNext() call XMLStreamReader.nextTag() call XMLStreamReader.nextTag() call XMLStreamReader.nextTag() call XMLStreamReader.nextTag() call XMLStreamReader.nextTag() decl_stmt java.lang.String = call XMLStreamReader.getLocalName() call XMLStreamReader.getLocalName() call XMLStreamReader.getLocalName() call XMLStreamReader.getLocalName() call XMLStreamReader.getLocalName() = call XMLStreamReader.getElementText() call XMLStreamReader.getElementText() call XMLStreamReader.getElementText() call XMLStreamReader.getElementText() call XMLStreamReader.getElementText() call XMLStreamReader.close() call XMLStreamReader.close() call XMLStreamReader.close() call XMLStreamReader.close() call XMLStreamReader.close() XMLStreamReader String MockHttpInputMessage StAXSource public public throws decl_stmt org.springframework.http.MockHttpInputMessage = new call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() new call decl SourceHttpMessageConverter.setSupportDtd() call decl SourceHttpMessageConverter.setSupportDtd() call decl SourceHttpMessageConverter.setSupportDtd() call decl SourceHttpMessageConverter.setSupportDtd() call decl SourceHttpMessageConverter.setSupportDtd() decl_stmt StAXSource = call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() decl_stmt XMLStreamReader = call StAXSource.getXMLStreamReader() call StAXSource.getXMLStreamReader() call StAXSource.getXMLStreamReader() call StAXSource.getXMLStreamReader() call StAXSource.getXMLStreamReader() call XMLStreamReader.hasNext() call XMLStreamReader.hasNext() call XMLStreamReader.hasNext() call XMLStreamReader.hasNext() call XMLStreamReader.hasNext() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() decl_stmt java.lang.String = call XMLStreamReader.getLocalName() call XMLStreamReader.getLocalName() call XMLStreamReader.getLocalName() call XMLStreamReader.getLocalName() call XMLStreamReader.getLocalName() try = call XMLStreamReader.getElementText() call XMLStreamReader.getElementText() call XMLStreamReader.getElementText() call XMLStreamReader.getElementText() call XMLStreamReader.getElementText() catch call XMLStreamReader.close() call XMLStreamReader.close() call XMLStreamReader.close() call XMLStreamReader.close() call XMLStreamReader.close() String String XMLStreamReader MockHttpInputMessage StAXSource public public throws decl_stmt java.lang.String = + + + + + + + + + + + + + + decl_stmt org.springframework.http.MockHttpInputMessage = new call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) decl_stmt StAXSource = decl_stmt XMLStreamReader = call StAXSource.getXMLStreamReader() call StAXSource.getXMLStreamReader() call StAXSource.getXMLStreamReader() call StAXSource.getXMLStreamReader() call StAXSource.getXMLStreamReader() call XMLStreamReader.hasNext() call XMLStreamReader.hasNext() call XMLStreamReader.hasNext() call XMLStreamReader.hasNext() call XMLStreamReader.hasNext() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() call XMLStreamReader.next() decl_stmt java.lang.String = call XMLStreamReader.getLocalName() call XMLStreamReader.getLocalName() call XMLStreamReader.getLocalName() call XMLStreamReader.getLocalName() call XMLStreamReader.getLocalName() = call XMLStreamReader.getElementText() call XMLStreamReader.getElementText() call XMLStreamReader.getElementText() call XMLStreamReader.getElementText() call XMLStreamReader.getElementText() String MockHttpInputMessage StreamSource public public throws decl_stmt org.springframework.http.MockHttpInputMessage = new call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() new decl_stmt StreamSource = call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() decl_stmt java.lang.String = new call StreamSource.getInputStream() call StreamSource.getInputStream() call StreamSource.getInputStream() call StreamSource.getInputStream() call StreamSource.getInputStream() MockHttpInputMessage public public throws decl_stmt org.springframework.http.MockHttpInputMessage = new call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call java.lang.String.getBytes(Charset) call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() call org.springframework.http.MockHttpInputMessage.getHeaders() new call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() call decl SourceHttpMessageConverter.read() DocumentBuilderFactory Element DOMSource Document MockHttpOutputMessage public public throws decl_stmt DocumentBuilderFactory = call DocumentBuilderFactory.setNamespaceAware() call DocumentBuilderFactory.setNamespaceAware() call DocumentBuilderFactory.setNamespaceAware() call DocumentBuilderFactory.setNamespaceAware() call DocumentBuilderFactory.setNamespaceAware() decl_stmt javax.swing.text.Document = call DocumentBuilderFactory.newDocumentBuilder() call DocumentBuilderFactory.newDocumentBuilder() call DocumentBuilderFactory.newDocumentBuilder() call DocumentBuilderFactory.newDocumentBuilder() call DocumentBuilderFactory.newDocumentBuilder() decl_stmt javax.swing.text.Element = call Document.createElement() call Document.createElement() call Document.createElement() call Document.createElement() call Document.createElement() call Document.appendChild() call Document.appendChild() call Document.appendChild() call Document.appendChild() call Document.appendChild() call Element.setTextContent() call Element.setTextContent() call Element.setTextContent() call Element.setTextContent() call Element.setTextContent() decl_stmt DOMSource = new decl_stmt org.springframework.http.MockHttpOutputMessage = new call decl SourceHttpMessageConverter.write() call decl SourceHttpMessageConverter.write() call decl SourceHttpMessageConverter.write() call decl SourceHttpMessageConverter.write() call decl SourceHttpMessageConverter.write() call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) new call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getBodyAsBytes() call org.springframework.http.MockHttpOutputMessage.getBodyAsBytes() call org.springframework.http.MockHttpOutputMessage.getBodyAsBytes() call org.springframework.http.MockHttpOutputMessage.getBodyAsBytes() call org.springframework.http.MockHttpOutputMessage.getBodyAsBytes() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() String MockHttpOutputMessage SAXSource public public throws decl_stmt java.lang.String = decl_stmt SAXSource = new new new decl_stmt org.springframework.http.MockHttpOutputMessage = new call decl SourceHttpMessageConverter.write() call decl SourceHttpMessageConverter.write() call decl SourceHttpMessageConverter.write() call decl SourceHttpMessageConverter.write() call decl SourceHttpMessageConverter.write() call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) new call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() String MockHttpOutputMessage StreamSource public public throws decl_stmt java.lang.String = decl_stmt StreamSource = new new decl_stmt org.springframework.http.MockHttpOutputMessage = new call decl SourceHttpMessageConverter.write() call decl SourceHttpMessageConverter.write() call decl SourceHttpMessageConverter.write() call decl SourceHttpMessageConverter.write() call decl SourceHttpMessageConverter.write() call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) call org.springframework.http.MockHttpOutputMessage.getBodyAsString(Charset) new call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders() call org.springframework.http.MockHttpOutputMessage.getHeaders()