org.springframework.messaging.simp.stomp static static org.junit.Assert.* import static static org.mockito.Mockito.* import java.util.ArrayList import java.util.Arrays import java.util.Collections import java.util.List import java.util.concurrent.Callable import org.junit.Before import org.junit.Test import org.mockito.ArgumentCaptor import org.springframework.messaging.Message import org.springframework.messaging.MessageHandler import org.springframework.messaging.MessageHeaders import org.springframework.messaging.StubMessageChannel import org.springframework.messaging.simp.SimpMessageHeaderAccessor import org.springframework.messaging.simp.SimpMessageType import org.springframework.messaging.simp.TestPrincipal import org.springframework.messaging.support.MessageBuilder import org.springframework.messaging.support.MessageHeaderAccessor import org.springframework.messaging.tcp.ReconnectStrategy import org.springframework.messaging.tcp.TcpConnection import org.springframework.messaging.tcp.TcpConnectionHandler import org.springframework.messaging.tcp.TcpOperations import org.springframework.util.concurrent.ListenableFuture import org.springframework.util.concurrent.ListenableFutureTask import class org.springframework.messaging.simp.stomp.StompBrokerRelayMessageHandlerTests StompBrokerRelayMessageHandler StubMessageChannel StubTcpOperations public public = new = new new new protected protected = new protected protected StompHeaderAccessor StompHeaderAccessor public public throws decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getHost() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getHost() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getHost() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getHost() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getHost() decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getHost() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getHost() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getHost() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getHost() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getHost() StompHeaderAccessor StompHeaderAccessor public public throws decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getLogin() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getLogin() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getLogin() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getLogin() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getLogin() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getPasscode(Map) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getPasscode(Map) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getPasscode(Map) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getPasscode(Map) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getPasscode(Map) decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getLogin() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getLogin() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getLogin() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getLogin() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getLogin() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getPasscode(Map) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getPasscode(Map) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getPasscode(Map) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getPasscode(Map) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getPasscode(Map) SimpMessageHeaderAccessor StompHeaderAccessor public public throws decl_stmt org.springframework.messaging.simp.SimpMessageHeaderAccessor = call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) new call SimpMessageHeaderAccessor.getMessageHeaders() call SimpMessageHeaderAccessor.getMessageHeaders() call SimpMessageHeaderAccessor.getMessageHeaders() call SimpMessageHeaderAccessor.getMessageHeaders() call SimpMessageHeaderAccessor.getMessageHeaders() decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() decl Message StompHeaderAccessor public public throws decl_stmt org.springframework.messaging.Message < = decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getUser() call StompHeaderAccessor.getUser() call StompHeaderAccessor.getUser() call StompHeaderAccessor.getUser() call StompHeaderAccessor.getUser() decl Message StompHeaderAccessor public public throws decl_stmt org.springframework.messaging.Message < = decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getUser() call StompHeaderAccessor.getUser() call StompHeaderAccessor.getUser() call StompHeaderAccessor.getUser() call StompHeaderAccessor.getUser() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getMessage() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getMessage() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getMessage() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getMessage() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getMessage() decl Message StompHeaderAccessor public public throws decl_stmt org.springframework.messaging.Message < = decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getCommand() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getSessionId() call StompHeaderAccessor.getUser() call StompHeaderAccessor.getUser() call StompHeaderAccessor.getUser() call StompHeaderAccessor.getUser() call StompHeaderAccessor.getUser() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getMessage() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getMessage() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getMessage() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getMessage() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.getMessage() MessageHeaders decl Message MessageHandler StompHeaderAccessor decl ArgumentCaptor public public throws decl_stmt org.springframework.messaging.MessageHandler = decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() decl_stmt org.springframework.messaging.MessageHeaders = call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() new decl_stmt org.springframework.messaging.Message < = decl_stmt ArgumentCaptor < = call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() StompHeaderAccessor private < private < decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setUser() call StompHeaderAccessor.setUser() call StompHeaderAccessor.setUser() call StompHeaderAccessor.setUser() call StompHeaderAccessor.setUser() new return new call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() StompHeaderAccessor private < private < decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = if != call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() if != call StompHeaderAccessor.setUser() call StompHeaderAccessor.setUser() call StompHeaderAccessor.setUser() call StompHeaderAccessor.setUser() call StompHeaderAccessor.setUser() new if != call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() return new call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() decl ListenableFutureTask private static < private static < decl_stmt org.springframework.util.concurrent.ListenableFutureTask < = new <> new < public public throws return call decl ListenableFutureTask.run() call decl ListenableFutureTask.run() call decl ListenableFutureTask.run() call decl ListenableFutureTask.run() call decl ListenableFutureTask.run() return public public throws return decl ListenableFutureTask private static < private static < decl_stmt org.springframework.util.concurrent.ListenableFutureTask < = new <> new < public public throws return call decl ListenableFutureTask.run() call decl ListenableFutureTask.run() call decl ListenableFutureTask.run() call decl ListenableFutureTask.run() call decl ListenableFutureTask.run() return public public throws return public < < public < < return decl Message StompHeaderAccessor public public + > decl_stmt org.springframework.messaging.Message < = decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = return public < public < < = return public < public < < = return public < public < return public public < public < < public < < return public < public < < return public public public public public public