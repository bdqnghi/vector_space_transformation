org.springframework.messaging.simp.annotation.support java.lang.reflect.Method import java.nio.charset.Charset import java.nio.charset.StandardCharsets import java.security.Principal import com.fasterxml.jackson.annotation.JsonView import org.junit.Before import org.junit.Test import org.mockito.ArgumentCaptor import org.mockito.Captor import org.mockito.Mock import org.mockito.Mockito import org.mockito.MockitoAnnotations import org.springframework.core.MethodParameter import org.springframework.messaging.Message import org.springframework.messaging.MessageChannel import org.springframework.messaging.MessageHeaders import org.springframework.messaging.converter.MappingJackson2MessageConverter import org.springframework.messaging.converter.StringMessageConverter import org.springframework.messaging.core.MessageSendingOperations import org.springframework.messaging.handler.annotation.MessageMapping import org.springframework.messaging.handler.annotation.SendTo import org.springframework.messaging.simp.SimpMessageHeaderAccessor import org.springframework.messaging.simp.SimpMessagingTemplate import org.springframework.messaging.simp.annotation.SubscribeMapping import org.springframework.messaging.support.MessageBuilder import org.springframework.messaging.support.MessageHeaderAccessor import org.springframework.util.MimeType import static static org.junit.Assert.* import static static org.mockito.BDDMockito.* import class org.springframework.messaging.simp.annotation.support.SubscriptionMethodReturnValueHandlerTests SubscriptionMethodReturnValueHandler MethodParameter MethodParameter SubscriptionMethodReturnValueHandler MethodParameter MethodParameter decl ArgumentCaptor MessageChannel String MimeType SimpMessagingTemplate Method SimpMessagingTemplate public public throws decl_stmt org.springframework.messaging.simp.SimpMessagingTemplate = new call SimpMessagingTemplate.setMessageConverter() call SimpMessagingTemplate.setMessageConverter() call SimpMessagingTemplate.setMessageConverter() call SimpMessagingTemplate.setMessageConverter() call SimpMessagingTemplate.setMessageConverter() new = new decl_stmt org.springframework.messaging.simp.SimpMessagingTemplate = new call SimpMessagingTemplate.setMessageConverter() call SimpMessagingTemplate.setMessageConverter() call SimpMessagingTemplate.setMessageConverter() call SimpMessagingTemplate.setMessageConverter() call SimpMessagingTemplate.setMessageConverter() new = new decl_stmt com.sun.jdi.Method = = new - = = new - = = new - = = new - public public throws SimpMessageHeaderAccessor String decl Message String decl Message String public public throws decl_stmt java.lang.String = decl_stmt java.lang.String = decl_stmt java.lang.String = decl_stmt org.springframework.messaging.Message < = decl_stmt org.springframework.messaging.Message < = decl_stmt org.springframework.messaging.simp.SimpMessageHeaderAccessor = call SimpMessageHeaderAccessor.getId() call SimpMessageHeaderAccessor.getId() call SimpMessageHeaderAccessor.getId() call SimpMessageHeaderAccessor.getId() call SimpMessageHeaderAccessor.getId() call SimpMessageHeaderAccessor.getTimestamp() call SimpMessageHeaderAccessor.getTimestamp() call SimpMessageHeaderAccessor.getTimestamp() call SimpMessageHeaderAccessor.getTimestamp() call SimpMessageHeaderAccessor.getTimestamp() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSessionId(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSessionId(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSessionId(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSessionId(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSessionId(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSubscriptionId() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSubscriptionId() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSubscriptionId() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSubscriptionId() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSubscriptionId() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call SimpMessageHeaderAccessor.getContentType() call SimpMessageHeaderAccessor.getContentType() call SimpMessageHeaderAccessor.getContentType() call SimpMessageHeaderAccessor.getContentType() call SimpMessageHeaderAccessor.getContentType() call SimpMessageHeaderAccessor.getHeader() call SimpMessageHeaderAccessor.getHeader() call SimpMessageHeaderAccessor.getHeader() call SimpMessageHeaderAccessor.getHeader() call SimpMessageHeaderAccessor.getHeader() SimpMessageHeaderAccessor String String SubscriptionMethodReturnValueHandler decl ArgumentCaptor String decl Message MessageSendingOperations public public throws decl_stmt java.lang.String = decl_stmt java.lang.String = decl_stmt java.lang.String = decl_stmt org.springframework.messaging.Message < = decl_stmt org.springframework.messaging.core.MessageSendingOperations = decl_stmt org.springframework.messaging.simp.annotation.support.SubscriptionMethodReturnValueHandler = new call org.springframework.messaging.simp.annotation.support.SubscriptionMethodReturnValueHandler.handleReturnValue(Object,MethodParameter,Message) call org.springframework.messaging.simp.annotation.support.SubscriptionMethodReturnValueHandler.handleReturnValue(Object,MethodParameter,Message) call org.springframework.messaging.simp.annotation.support.SubscriptionMethodReturnValueHandler.handleReturnValue(Object,MethodParameter,Message) call org.springframework.messaging.simp.annotation.support.SubscriptionMethodReturnValueHandler.handleReturnValue(Object,MethodParameter,Message) call org.springframework.messaging.simp.annotation.support.SubscriptionMethodReturnValueHandler.handleReturnValue(Object,MethodParameter,Message) decl_stmt ArgumentCaptor < = call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() decl_stmt org.springframework.messaging.simp.SimpMessageHeaderAccessor = call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call SimpMessageHeaderAccessor.isMutable() call SimpMessageHeaderAccessor.isMutable() call SimpMessageHeaderAccessor.isMutable() call SimpMessageHeaderAccessor.isMutable() call SimpMessageHeaderAccessor.isMutable() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSessionId(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSessionId(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSessionId(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSessionId(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSessionId(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSubscriptionId() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSubscriptionId() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSubscriptionId() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSubscriptionId() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getSubscriptionId() call SimpMessageHeaderAccessor.getHeader() call SimpMessageHeaderAccessor.getHeader() call SimpMessageHeaderAccessor.getHeader() call SimpMessageHeaderAccessor.getHeader() call SimpMessageHeaderAccessor.getHeader() String String decl Message String decl Message public public throws decl_stmt java.lang.String = decl_stmt java.lang.String = decl_stmt java.lang.String = decl_stmt org.springframework.messaging.Message < = decl_stmt org.springframework.messaging.Message < = new call decl Message.getPayload() call decl Message.getPayload() call decl Message.getPayload() call decl Message.getPayload() call decl Message.getPayload() SimpMessageHeaderAccessor private < private < decl_stmt org.springframework.messaging.simp.SimpMessageHeaderAccessor = call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSubscriptionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSubscriptionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSubscriptionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSubscriptionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSubscriptionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setUser(Principal) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setUser(Principal) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setUser(Principal) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setUser(Principal) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setUser(Principal) return new call SimpMessageHeaderAccessor.toMap() call SimpMessageHeaderAccessor.toMap() call SimpMessageHeaderAccessor.toMap() call SimpMessageHeaderAccessor.toMap() call SimpMessageHeaderAccessor.toMap() private private return private private return public public return JacksonViewBean public public decl_stmt JacksonViewBean = new call JacksonViewBean.setWithView1() call JacksonViewBean.setWithView1() call JacksonViewBean.setWithView1() call JacksonViewBean.setWithView1() call JacksonViewBean.setWithView1() call JacksonViewBean.setWithView2() call JacksonViewBean.setWithView2() call JacksonViewBean.setWithView2() call JacksonViewBean.setWithView2() call JacksonViewBean.setWithView2() call JacksonViewBean.setWithoutView() call JacksonViewBean.setWithoutView() call JacksonViewBean.setWithoutView() call JacksonViewBean.setWithoutView() call JacksonViewBean.setWithoutView() return public public return public public = public public return public public = public public return public public =