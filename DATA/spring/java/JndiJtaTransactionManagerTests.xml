org.springframework.transaction javax.transaction.Status import javax.transaction.TransactionManager import javax.transaction.UserTransaction import org.junit.After import org.junit.Test import org.springframework.tests.mock.jndi.ExpectedLookupTemplate import org.springframework.transaction.jta.JtaTransactionManager import org.springframework.transaction.jta.UserTransactionAdapter import org.springframework.transaction.support.TransactionCallbackWithoutResult import org.springframework.transaction.support.TransactionSynchronizationManager import org.springframework.transaction.support.TransactionTemplate import static static org.junit.Assert.* import static static org.mockito.BDDMockito.* import class org.springframework.transaction.JndiJtaTransactionManagerTests public public throws public public throws public public throws public public throws JtaTransactionManager UserTransactionAdapter UserTransaction TransactionTemplate TransactionManager ExpectedLookupTemplate private private throws decl_stmt UserTransaction = decl_stmt TransactionManager = if call UserTransaction.getStatus() call UserTransaction.getStatus() call UserTransaction.getStatus() call UserTransaction.getStatus() call UserTransaction.getStatus() else call TransactionManager.getStatus() call TransactionManager.getStatus() call TransactionManager.getStatus() call TransactionManager.getStatus() call TransactionManager.getStatus() decl_stmt org.springframework.transaction.jta.JtaTransactionManager = new decl_stmt org.springframework.tests.mock.jndi.ExpectedLookupTemplate = new if call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() if call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() else call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() if call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() else call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() instanceof decl_stmt org.springframework.transaction.jta.UserTransactionAdapter = call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.UserTransactionAdapter.getTransactionManager() call org.springframework.transaction.jta.UserTransactionAdapter.getTransactionManager() call org.springframework.transaction.jta.UserTransactionAdapter.getTransactionManager() call org.springframework.transaction.jta.UserTransactionAdapter.getTransactionManager() call org.springframework.transaction.jta.UserTransactionAdapter.getTransactionManager() decl_stmt org.springframework.transaction.support.TransactionTemplate = new ! call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) new protected protected ! if else protected protected UserTransaction JtaTransactionManager TransactionManager TransactionTemplate ExpectedLookupTemplate public public throws decl_stmt UserTransaction = call UserTransaction.getStatus() call UserTransaction.getStatus() call UserTransaction.getStatus() call UserTransaction.getStatus() call UserTransaction.getStatus() decl_stmt TransactionManager = decl_stmt org.springframework.transaction.jta.JtaTransactionManager = new call org.springframework.transaction.jta.JtaTransactionManager.setUserTransactionName(String) call org.springframework.transaction.jta.JtaTransactionManager.setUserTransactionName(String) call org.springframework.transaction.jta.JtaTransactionManager.setUserTransactionName(String) call org.springframework.transaction.jta.JtaTransactionManager.setUserTransactionName(String) call org.springframework.transaction.jta.JtaTransactionManager.setUserTransactionName(String) call org.springframework.transaction.jta.JtaTransactionManager.setTransactionManagerName(String) call org.springframework.transaction.jta.JtaTransactionManager.setTransactionManagerName(String) call org.springframework.transaction.jta.JtaTransactionManager.setTransactionManagerName(String) call org.springframework.transaction.jta.JtaTransactionManager.setTransactionManagerName(String) call org.springframework.transaction.jta.JtaTransactionManager.setTransactionManagerName(String) decl_stmt org.springframework.tests.mock.jndi.ExpectedLookupTemplate = new call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call ExpectedLookupTemplate.addObject() call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() call org.springframework.transaction.jta.JtaTransactionManager.getTransactionManager() decl_stmt org.springframework.transaction.support.TransactionTemplate = new ! call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) new protected protected ! protected protected UserTransaction UserTransaction JtaTransactionManager TransactionTemplate public public throws decl_stmt UserTransaction = call UserTransaction.getStatus() call UserTransaction.getStatus() call UserTransaction.getStatus() call UserTransaction.getStatus() call UserTransaction.getStatus() decl_stmt UserTransaction = call UserTransaction.getStatus() call UserTransaction.getStatus() call UserTransaction.getStatus() call UserTransaction.getStatus() call UserTransaction.getStatus() decl_stmt org.springframework.transaction.jta.JtaTransactionManager = new call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) new call org.springframework.transaction.jta.JtaTransactionManager.setCacheUserTransaction(boolean) call org.springframework.transaction.jta.JtaTransactionManager.setCacheUserTransaction(boolean) call org.springframework.transaction.jta.JtaTransactionManager.setCacheUserTransaction(boolean) call org.springframework.transaction.jta.JtaTransactionManager.setCacheUserTransaction(boolean) call org.springframework.transaction.jta.JtaTransactionManager.setCacheUserTransaction(boolean) call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.afterPropertiesSet() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() call org.springframework.transaction.jta.JtaTransactionManager.getUserTransaction() decl_stmt org.springframework.transaction.support.TransactionTemplate = new call JtaTransactionManager.getTransactionSynchronization() call JtaTransactionManager.getTransactionSynchronization() call JtaTransactionManager.getTransactionSynchronization() call JtaTransactionManager.getTransactionSynchronization() call JtaTransactionManager.getTransactionSynchronization() ! call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) new protected protected call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) call org.springframework.transaction.jta.JtaTransactionManager.setJndiTemplate(JndiTemplate) new call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) new protected protected ! protected protected protected protected public public