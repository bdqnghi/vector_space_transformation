org.springframework.web.socket.messaging static static org.junit.Assert.* import java.security.Principal import java.util.Arrays import java.util.HashSet import java.util.Iterator import java.util.Set import org.junit.Test import org.springframework.messaging.Message import org.springframework.messaging.simp.SimpMessageHeaderAccessor import org.springframework.messaging.simp.SimpMessageType import org.springframework.messaging.simp.user.SimpSubscription import org.springframework.messaging.simp.user.SimpSubscriptionMatcher import org.springframework.messaging.simp.user.SimpUser import org.springframework.messaging.support.MessageBuilder import org.springframework.web.socket.CloseStatus import class org.springframework.web.socket.messaging.DefaultSimpUserRegistryTests decl Message SimpUser TestPrincipal DefaultSimpUserRegistry SessionConnectedEvent public public decl_stmt org.springframework.messaging.simp.TestPrincipal = new decl_stmt org.springframework.messaging.Message < = decl_stmt SessionConnectedEvent = new decl_stmt org.springframework.web.socket.messaging.DefaultSimpUserRegistry = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) decl_stmt org.springframework.messaging.simp.user.SimpUser = call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call SimpUser.getSessions() call SimpUser.getSessions() call SimpUser.getSessions() call SimpUser.getSessions() call SimpUser.getSessions() call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) SessionConnectedEvent decl Message DefaultSimpUserRegistry SimpUser TestPrincipal public public decl_stmt org.springframework.web.socket.messaging.DefaultSimpUserRegistry = new decl_stmt org.springframework.messaging.simp.TestPrincipal = new decl_stmt org.springframework.messaging.Message < = decl_stmt SessionConnectedEvent = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) = = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) = = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) decl_stmt org.springframework.messaging.simp.user.SimpUser = call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call SimpUser.getSessions() call SimpUser.getSessions() call SimpUser.getSessions() call SimpUser.getSessions() call SimpUser.getSessions() call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) CloseStatus SessionDisconnectEvent SimpUser DefaultSimpUserRegistry SessionConnectedEvent decl Message TestPrincipal public public decl_stmt org.springframework.web.socket.messaging.DefaultSimpUserRegistry = new decl_stmt org.springframework.messaging.simp.TestPrincipal = new decl_stmt org.springframework.messaging.Message < = decl_stmt SessionConnectedEvent = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) = = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) = = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) decl_stmt org.springframework.messaging.simp.user.SimpUser = call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call SimpUser.getSessions() call SimpUser.getSessions() call SimpUser.getSessions() call SimpUser.getSessions() call SimpUser.getSessions() decl_stmt org.springframework.web.socket.CloseStatus = = decl_stmt org.springframework.web.socket.messaging.SessionDisconnectEvent = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) = = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call SimpUser.getSessions() call SimpUser.getSessions() call SimpUser.getSessions() call SimpUser.getSessions() call SimpUser.getSessions() call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) decl Iterator decl Set decl Set DefaultSimpUserRegistry decl Message SessionConnectedEvent SessionSubscribeEvent TestPrincipal public public throws decl_stmt org.springframework.web.socket.messaging.DefaultSimpUserRegistry = new decl_stmt org.springframework.messaging.simp.TestPrincipal = new decl_stmt org.springframework.messaging.Message < = decl_stmt SessionConnectedEvent = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) = decl_stmt SessionSubscribeEvent = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) = = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) = = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) decl_stmt java.util.Set < = call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.findSubscriptions(SimpSubscriptionMatcher) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.findSubscriptions(SimpSubscriptionMatcher) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.findSubscriptions(SimpSubscriptionMatcher) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.findSubscriptions(SimpSubscriptionMatcher) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.findSubscriptions(SimpSubscriptionMatcher) new public public return call decl Set.size() call decl Set.size() call decl Set.size() call decl Set.size() call decl Set.size() decl_stmt java.util.Iterator < = call decl Set.iterator() call decl Set.iterator() call decl Set.iterator() call decl Set.iterator() call decl Set.iterator() decl_stmt java.util.Set < = new <> call decl Set.add() call decl Set.add() call decl Set.add() call decl Set.add() call decl Set.add() call decl Iterator.next() call decl Iterator.next() call decl Iterator.next() call decl Iterator.next() call decl Iterator.next() call decl Set.add() call decl Set.add() call decl Set.add() call decl Set.add() call decl Set.add() call decl Iterator.next() call decl Iterator.next() call decl Iterator.next() call decl Iterator.next() call decl Iterator.next() new <> public public return SessionConnectedEvent decl Message DefaultSimpUserRegistry SimpUser TestPrincipal public public throws decl_stmt org.springframework.web.socket.messaging.DefaultSimpUserRegistry = new decl_stmt org.springframework.messaging.simp.TestPrincipal = new decl_stmt org.springframework.messaging.Message < = decl_stmt SessionConnectedEvent = new call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.onApplicationEvent(ApplicationEvent) decl_stmt org.springframework.messaging.simp.user.SimpUser = call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.web.socket.messaging.DefaultSimpUserRegistry.getUser() call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) call org.springframework.messaging.simp.user.SimpUser.getSession(String) private < private < return SimpMessageHeaderAccessor private < private < decl_stmt org.springframework.messaging.simp.SimpMessageHeaderAccessor = call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) if != call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) if != call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSubscriptionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSubscriptionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSubscriptionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSubscriptionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSubscriptionId(String) return new call SimpMessageHeaderAccessor.getMessageHeaders() call SimpMessageHeaderAccessor.getMessageHeaders() call SimpMessageHeaderAccessor.getMessageHeaders() call SimpMessageHeaderAccessor.getMessageHeaders() call SimpMessageHeaderAccessor.getMessageHeaders() public public return