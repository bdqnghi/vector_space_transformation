org.springframework.messaging.simp.user static static org.junit.Assert.* import static static org.mockito.BDDMockito.* import static static org.springframework.messaging.simp.SimpMessageHeaderAccessor.* import java.nio.charset.Charset import org.junit.Before import org.junit.Test import org.mockito.ArgumentCaptor import org.mockito.Mockito import org.springframework.messaging.Message import org.springframework.messaging.StubMessageChannel import org.springframework.messaging.SubscribableChannel import org.springframework.messaging.simp.SimpMessageHeaderAccessor import org.springframework.messaging.simp.SimpMessageType import org.springframework.messaging.simp.TestPrincipal import org.springframework.messaging.simp.stomp.StompCommand import org.springframework.messaging.simp.stomp.StompHeaderAccessor import org.springframework.messaging.support.MessageBuilder import class org.springframework.messaging.simp.user.UserDestinationMessageHandlerTests UserDestinationMessageHandler SimpUserRegistry String SubscribableChannel UserDestinationResolver public public = = decl_stmt org.springframework.messaging.simp.user.UserDestinationResolver = new = new new Message decl ArgumentCaptor public public decl_stmt ArgumentCaptor < = call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() decl_stmt org.springframework.messaging.Message = call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call org.springframework.messaging.Message.getHeaders() call org.springframework.messaging.Message.getHeaders() call org.springframework.messaging.Message.getHeaders() call org.springframework.messaging.Message.getHeaders() call org.springframework.messaging.Message.getHeaders() Message decl ArgumentCaptor public public decl_stmt ArgumentCaptor < = call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() decl_stmt org.springframework.messaging.Message = call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call org.springframework.messaging.Message.getHeaders() call org.springframework.messaging.Message.getHeaders() call org.springframework.messaging.Message.getHeaders() call org.springframework.messaging.Message.getHeaders() call org.springframework.messaging.Message.getHeaders() decl ArgumentCaptor TestSimpUser SimpMessageHeaderAccessor public public decl_stmt org.springframework.messaging.simp.user.TestSimpUser = new call org.springframework.messaging.simp.user.TestSimpUser.addSessions(TestSimpSession) call org.springframework.messaging.simp.user.TestSimpUser.addSessions(TestSimpSession) call org.springframework.messaging.simp.user.TestSimpUser.addSessions(TestSimpSession) call org.springframework.messaging.simp.user.TestSimpUser.addSessions(TestSimpSession) call org.springframework.messaging.simp.user.TestSimpUser.addSessions(TestSimpSession) new decl_stmt ArgumentCaptor < = call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() decl_stmt org.springframework.messaging.simp.SimpMessageHeaderAccessor = call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() Message decl ArgumentCaptor SimpMessageHeaderAccessor public public decl_stmt ArgumentCaptor < = call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() decl_stmt org.springframework.messaging.Message = call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() decl_stmt org.springframework.messaging.simp.SimpMessageHeaderAccessor = call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() SimpMessageHeaderAccessor decl ArgumentCaptor StompHeaderAccessor TestSimpUser decl byte public public decl_stmt org.springframework.messaging.simp.user.TestSimpUser = new call org.springframework.messaging.simp.user.TestSimpUser.addSessions(TestSimpSession) call org.springframework.messaging.simp.user.TestSimpUser.addSessions(TestSimpSession) call org.springframework.messaging.simp.user.TestSimpUser.addSessions(TestSimpSession) call org.springframework.messaging.simp.user.TestSimpUser.addSessions(TestSimpSession) call org.springframework.messaging.simp.user.TestSimpUser.addSessions(TestSimpSession) new decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() decl_stmt byte = call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() decl_stmt ArgumentCaptor < = call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.capture() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() decl_stmt org.springframework.messaging.simp.SimpMessageHeaderAccessor = call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call org.springframework.messaging.simp.SimpMessageHeaderAccessor.getDestination() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call SimpMessageHeaderAccessor.getFirstNativeHeader() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() call decl ArgumentCaptor.getValue() StompHeaderAccessor decl byte public public decl_stmt org.springframework.messaging.simp.stomp.StompHeaderAccessor = call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call StompHeaderAccessor.setSessionId() call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.stomp.StompHeaderAccessor.setDestination(String) call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setNativeHeader() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() call StompHeaderAccessor.setLeaveMutable() decl_stmt byte = call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() call StompHeaderAccessor.getMessageHeaders() public public SimpMessageHeaderAccessor private < private < decl_stmt org.springframework.messaging.simp.SimpMessageHeaderAccessor = if != call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) if != call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setUser(Principal) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setUser(Principal) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setUser(Principal) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setUser(Principal) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setUser(Principal) new if != call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) return new