org.springframework.messaging.simp.annotation.support java.util.Arrays import java.util.Collections import java.util.HashMap import java.util.LinkedHashMap import java.util.Map import java.util.Optional import java.util.concurrent.CompletableFuture import java.util.concurrent.ConcurrentHashMap import org.junit.Before import org.junit.Test import org.mockito.ArgumentCaptor import org.mockito.Captor import org.mockito.Mock import org.mockito.MockitoAnnotations import org.springframework.context.support.StaticApplicationContext import org.springframework.messaging.Message import org.springframework.messaging.MessageChannel import org.springframework.messaging.MessageHeaders import org.springframework.messaging.SubscribableChannel import org.springframework.messaging.converter.MessageConverter import org.springframework.messaging.handler.HandlerMethod import org.springframework.messaging.handler.annotation.DestinationVariable import org.springframework.messaging.handler.annotation.Header import org.springframework.messaging.handler.annotation.Headers import org.springframework.messaging.handler.annotation.MessageExceptionHandler import org.springframework.messaging.handler.annotation.MessageMapping import org.springframework.messaging.handler.annotation.Payload import org.springframework.messaging.handler.annotation.support.MethodArgumentNotValidException import org.springframework.messaging.simp.SimpAttributes import org.springframework.messaging.simp.SimpAttributesContextHolder import org.springframework.messaging.simp.SimpMessageHeaderAccessor import org.springframework.messaging.simp.SimpMessageSendingOperations import org.springframework.messaging.simp.SimpMessagingTemplate import org.springframework.messaging.simp.annotation.SubscribeMapping import org.springframework.messaging.support.MessageBuilder import org.springframework.stereotype.Controller import org.springframework.util.AntPathMatcher import org.springframework.util.concurrent.ListenableFutureTask import org.springframework.validation.Errors import org.springframework.validation.Validator import org.springframework.validation.annotation.Validated import static static org.hamcrest.Matchers.is import static static org.junit.Assert.assertEquals import static static org.junit.Assert.assertNotNull import static static org.junit.Assert.assertNull import static static org.junit.Assert.assertThat import static static org.junit.Assert.assertTrue import static static org.mockito.BDDMockito.given import static static org.mockito.Matchers.any import static static org.mockito.Matchers.anyObject import static static org.mockito.Mockito.verify import class annotation org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandlerTests TestSimpAnnotationMethodMessageHandler TestController decl ArgumentCaptor String SubscribableChannel MessageConverter SimpMessagingTemplate public public decl_stmt org.springframework.messaging.simp.SimpMessagingTemplate = new call SimpMessagingTemplate.setMessageConverter() call SimpMessagingTemplate.setMessageConverter() call SimpMessagingTemplate.setMessageConverter() call SimpMessagingTemplate.setMessageConverter() call SimpMessagingTemplate.setMessageConverter() = new new new = new decl Map decl Message public public decl_stmt java.util.Map < = decl_stmt org.springframework.messaging.Message < = < decl Map decl Message public public decl_stmt java.util.Map < = decl_stmt org.springframework.messaging.Message < = decl Message public public decl_stmt org.springframework.messaging.Message < = decl Message public public decl_stmt org.springframework.messaging.Message < = decl Message public public decl_stmt org.springframework.messaging.Message < = decl Message public public decl_stmt org.springframework.messaging.Message < = instanceof decl Message public public decl_stmt org.springframework.messaging.Message < = decl Message HandlerMethod public public decl_stmt org.springframework.messaging.Message < = decl_stmt org.springframework.web.method.HandlerMethod = call org.springframework.web.method.HandlerMethod.getMethod() call org.springframework.web.method.HandlerMethod.getMethod() call org.springframework.web.method.HandlerMethod.getMethod() call org.springframework.web.method.HandlerMethod.getMethod() call org.springframework.web.method.HandlerMethod.getMethod() SimpMessageHeaderAccessor decl Message decl Map public public decl_stmt java.util.Map < = new <> call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() decl_stmt org.springframework.messaging.simp.SimpMessageHeaderAccessor = call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionAttributes(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionAttributes(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionAttributes(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionAttributes(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionAttributes(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) decl_stmt org.springframework.messaging.Message < = new DotPathSeparatorController decl Message public public decl_stmt DotPathSeparatorController = new new decl_stmt org.springframework.messaging.Message < = = ListenableFutureController Message decl Message public public decl_stmt org.springframework.messaging.Message = new decl_stmt ListenableFutureController = new decl_stmt org.springframework.messaging.Message < = call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() ListenableFutureController Message decl Message public public decl_stmt org.springframework.messaging.Message = new decl_stmt ListenableFutureController = new decl_stmt org.springframework.messaging.Message < = call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() call ListenableFutureController.future() CompletableFutureController Message decl Message public public decl_stmt org.springframework.messaging.Message = new decl_stmt CompletableFutureController = new decl_stmt org.springframework.messaging.Message < = call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() CompletableFutureController Message decl Message public public decl_stmt org.springframework.messaging.Message = new decl_stmt CompletableFutureController = new decl_stmt org.springframework.messaging.Message < = call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() call CompletableFutureController.future() new decl Message public public throws decl_stmt org.springframework.messaging.Message < = : private < private < return SimpMessageHeaderAccessor private < private < < decl_stmt org.springframework.messaging.simp.SimpMessageHeaderAccessor = call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionId(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionAttributes(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionAttributes(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionAttributes(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionAttributes(Map) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setSessionAttributes(Map) new <> call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) call org.springframework.messaging.simp.SimpMessageHeaderAccessor.setDestination(String) if != for < : call SimpMessageHeaderAccessor.setHeader() call SimpMessageHeaderAccessor.setHeader() call SimpMessageHeaderAccessor.setHeader() call SimpMessageHeaderAccessor.setHeader() call SimpMessageHeaderAccessor.setHeader() return new public public public public < = public public = = = = < = : public public = public public = public public = public public = public public throw new public public = public public = SimpAttributes public public decl_stmt org.springframework.messaging.simp.SimpAttributes = call org.springframework.messaging.simp.SimpAttributes.getAttribute(String) call org.springframework.messaging.simp.SimpAttributes.getAttribute(String) call org.springframework.messaging.simp.SimpAttributes.getAttribute(String) call org.springframework.messaging.simp.SimpAttributes.getAttribute(String) call org.springframework.messaging.simp.SimpAttributes.getAttribute(String) = public public = public public = public < public < = new < return public < public < = new < throw new return public public = public < public < = new <> return public public = public public < return String public public decl_stmt java.lang.String = if + +