org.springframework.web.servlet.view.velocity java.io.IOException import java.util.HashMap import java.util.Locale import java.util.Map import javax.servlet.http.HttpServletRequest import javax.servlet.http.HttpServletResponse import org.apache.velocity.Template import org.apache.velocity.app.VelocityEngine import org.apache.velocity.context.Context import org.apache.velocity.exception.MethodInvocationException import org.apache.velocity.exception.ParseErrorException import org.apache.velocity.tools.generic.DateTool import org.apache.velocity.tools.generic.MathTool import org.apache.velocity.tools.generic.NumberTool import org.junit.Test import org.springframework.context.ApplicationContextException import org.springframework.mock.web.test.MockHttpServletRequest import org.springframework.mock.web.test.MockHttpServletResponse import org.springframework.mock.web.test.MockServletContext import org.springframework.web.context.WebApplicationContext import org.springframework.web.servlet.DispatcherServlet import org.springframework.web.servlet.View import org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver import org.springframework.web.servlet.support.RequestDataValueProcessor import org.springframework.web.servlet.view.AbstractView import static static org.junit.Assert.* import static static org.mockito.BDDMockito.* import class org.springframework.web.servlet.view.velocity.VelocityViewTests WebApplicationContext VelocityView public public throws decl_stmt org.springframework.web.servlet.view.velocity.VelocityView = new decl_stmt org.springframework.web.context.WebApplicationContext = call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() new < call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setUrl() try call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() catch VelocityView public public throws decl_stmt org.springframework.web.servlet.view.velocity.VelocityView = new try call VelocityView.afterPropertiesSet() call VelocityView.afterPropertiesSet() call VelocityView.afterPropertiesSet() call VelocityView.afterPropertiesSet() call VelocityView.afterPropertiesSet() catch != - public public throws public public throws new public public throws new public public throws new public public throws new VelocityConfig String HttpServletRequest WebApplicationContext HttpServletResponse VelocityView MockServletContext decl Map decl Map Template private private final final throws decl_stmt java.util.Map < = new < call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() decl_stmt java.lang.String final final = decl_stmt org.springframework.web.context.WebApplicationContext = decl_stmt org.springframework.mock.web.MockServletContext = new call org.springframework.mock.web.MockServletContext.setAttribute(String,Object) call org.springframework.mock.web.MockServletContext.setAttribute(String,Object) call org.springframework.mock.web.MockServletContext.setAttribute(String,Object) call org.springframework.mock.web.MockServletContext.setAttribute(String,Object) call org.springframework.mock.web.MockServletContext.setAttribute(String,Object) decl_stmt Template final final = new decl_stmt org.springframework.web.servlet.view.velocity.VelocityConfig = new public public return new decl_stmt java.util.Map < = new < call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getServletContext() call WebApplicationContext.getServletContext() call WebApplicationContext.getServletContext() call WebApplicationContext.getServletContext() call WebApplicationContext.getServletContext() call WebApplicationContext.getBean() call WebApplicationContext.getBean() call WebApplicationContext.getBean() call WebApplicationContext.getBean() call WebApplicationContext.getBean() decl_stmt HttpServletRequest = new decl_stmt HttpServletResponse final final = new decl_stmt org.springframework.web.servlet.view.velocity.VelocityView = new protected protected throws == >= == if != throw call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() try call VelocityView.render() call VelocityView.render() call VelocityView.render() call VelocityView.render() call VelocityView.render() if != catch public public return new protected protected throws == >= == if != throw VelocityConfig String HttpServletRequest WebApplicationContext HttpServletResponse VelocityView MockServletContext decl Map Template public public throws decl_stmt java.lang.String final final = decl_stmt org.springframework.web.context.WebApplicationContext = decl_stmt org.springframework.mock.web.MockServletContext = new call org.springframework.mock.web.MockServletContext.setAttribute(String,Object) call org.springframework.mock.web.MockServletContext.setAttribute(String,Object) call org.springframework.mock.web.MockServletContext.setAttribute(String,Object) call org.springframework.mock.web.MockServletContext.setAttribute(String,Object) call org.springframework.mock.web.MockServletContext.setAttribute(String,Object) decl_stmt Template final final = new decl_stmt org.springframework.web.servlet.view.velocity.VelocityConfig = new public public return new decl_stmt java.util.Map < = new < call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getServletContext() call WebApplicationContext.getServletContext() call WebApplicationContext.getServletContext() call WebApplicationContext.getServletContext() call WebApplicationContext.getServletContext() call WebApplicationContext.getBean() call WebApplicationContext.getBean() call WebApplicationContext.getBean() call WebApplicationContext.getBean() call WebApplicationContext.getBean() decl_stmt HttpServletRequest = new decl_stmt HttpServletResponse final final = new call HttpServletResponse.setContentType() call HttpServletResponse.setContentType() call HttpServletResponse.setContentType() call HttpServletResponse.setContentType() call HttpServletResponse.setContentType() decl_stmt org.springframework.web.servlet.view.velocity.VelocityView = new protected protected == == protected protected < throws call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.render() call VelocityView.render() call VelocityView.render() call VelocityView.render() call VelocityView.render() new < call HttpServletResponse.getContentType() call HttpServletResponse.getContentType() call HttpServletResponse.getContentType() call HttpServletResponse.getContentType() call HttpServletResponse.getContentType() public public return new protected protected == == protected protected < throws DateTool VelocityConfig String HttpServletRequest WebApplicationContext decl Map HttpServletResponse VelocityView decl Map NumberTool Template public public throws decl_stmt java.lang.String final final = decl_stmt org.springframework.web.context.WebApplicationContext = call WebApplicationContext.getServletContext() call WebApplicationContext.getServletContext() call WebApplicationContext.getServletContext() call WebApplicationContext.getServletContext() call WebApplicationContext.getServletContext() new decl_stmt Template final final = new decl_stmt org.springframework.web.servlet.view.velocity.VelocityConfig = new public public return new decl_stmt java.util.Map < = new < call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() call WebApplicationContext.getBeansOfType() decl_stmt HttpServletRequest = call HttpServletRequest.getAttribute() call HttpServletRequest.getAttribute() call HttpServletRequest.getAttribute() call HttpServletRequest.getAttribute() call HttpServletRequest.getAttribute() call HttpServletRequest.getAttribute() call HttpServletRequest.getAttribute() call HttpServletRequest.getAttribute() call HttpServletRequest.getAttribute() call HttpServletRequest.getAttribute() new call HttpServletRequest.getLocale() call HttpServletRequest.getLocale() call HttpServletRequest.getLocale() call HttpServletRequest.getLocale() call HttpServletRequest.getLocale() decl_stmt HttpServletResponse final final = new decl_stmt org.springframework.web.servlet.view.velocity.VelocityView = new protected protected throws == == instanceof instanceof decl_stmt DateTool = call DateTool.getLocale() call DateTool.getLocale() call DateTool.getLocale() call DateTool.getLocale() call DateTool.getLocale() instanceof decl_stmt NumberTool = call NumberTool.getLocale() call NumberTool.getLocale() call NumberTool.getLocale() call NumberTool.getLocale() call NumberTool.getLocale() protected protected < throws call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setUrl() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() call VelocityView.setApplicationContext() decl_stmt java.util.Map < < = new < < call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call decl Map.put() call org.springframework.web.servlet.view.velocity.VelocityView.setToolAttributes(Map) call org.springframework.web.servlet.view.velocity.VelocityView.setToolAttributes(Map) call org.springframework.web.servlet.view.velocity.VelocityView.setToolAttributes(Map) call org.springframework.web.servlet.view.velocity.VelocityView.setToolAttributes(Map) call org.springframework.web.servlet.view.velocity.VelocityView.setToolAttributes(Map) call VelocityView.setDateToolAttribute() call VelocityView.setDateToolAttribute() call VelocityView.setDateToolAttribute() call VelocityView.setDateToolAttribute() call VelocityView.setDateToolAttribute() call org.springframework.web.servlet.view.velocity.VelocityView.setNumberToolAttribute(String) call org.springframework.web.servlet.view.velocity.VelocityView.setNumberToolAttribute(String) call org.springframework.web.servlet.view.velocity.VelocityView.setNumberToolAttribute(String) call org.springframework.web.servlet.view.velocity.VelocityView.setNumberToolAttribute(String) call org.springframework.web.servlet.view.velocity.VelocityView.setNumberToolAttribute(String) call VelocityView.setExposeSpringMacroHelpers() call VelocityView.setExposeSpringMacroHelpers() call VelocityView.setExposeSpringMacroHelpers() call VelocityView.setExposeSpringMacroHelpers() call VelocityView.setExposeSpringMacroHelpers() call VelocityView.render() call VelocityView.render() call VelocityView.render() call VelocityView.render() call VelocityView.render() new < call HttpServletResponse.getContentType() call HttpServletResponse.getContentType() call HttpServletResponse.getContentType() call HttpServletResponse.getContentType() call HttpServletResponse.getContentType() public public return new DateTool NumberTool protected protected throws == == instanceof instanceof decl_stmt DateTool = call DateTool.getLocale() call DateTool.getLocale() call DateTool.getLocale() call DateTool.getLocale() call DateTool.getLocale() instanceof decl_stmt NumberTool = call NumberTool.getLocale() call NumberTool.getLocale() call NumberTool.getLocale() call NumberTool.getLocale() call NumberTool.getLocale() protected protected < throws