org.springframework.orm.jpa javax.persistence.EntityManager import javax.persistence.EntityTransaction import javax.persistence.OptimisticLockException import org.junit.Test import org.springframework.transaction.TransactionDefinition import org.springframework.transaction.TransactionException import org.springframework.transaction.support.DefaultTransactionDefinition import static static org.junit.Assert.* import static static org.mockito.BDDMockito.* import class org.springframework.orm.jpa.DefaultJpaDialectTests JpaDialect DefaultTransactionDefinition public public throws decl_stmt org.springframework.transaction.support.DefaultTransactionDefinition = new call org.springframework.transaction.support.DefaultTransactionDefinition.setIsolationLevel(int) call org.springframework.transaction.support.DefaultTransactionDefinition.setIsolationLevel(int) call org.springframework.transaction.support.DefaultTransactionDefinition.setIsolationLevel(int) call org.springframework.transaction.support.DefaultTransactionDefinition.setIsolationLevel(int) call org.springframework.transaction.support.DefaultTransactionDefinition.setIsolationLevel(int) try call org.springframework.orm.jpa.JpaDialect.beginTransaction(EntityManager,TransactionDefinition) call org.springframework.orm.jpa.JpaDialect.beginTransaction(EntityManager,TransactionDefinition) call org.springframework.orm.jpa.JpaDialect.beginTransaction(EntityManager,TransactionDefinition) call org.springframework.orm.jpa.JpaDialect.beginTransaction(EntityManager,TransactionDefinition) call org.springframework.orm.jpa.JpaDialect.beginTransaction(EntityManager,TransactionDefinition) catch TransactionDefinition EntityManager EntityTransaction public public throws decl_stmt org.springframework.transaction.TransactionDefinition = new decl_stmt EntityManager = decl_stmt EntityTransaction = call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call EntityManager.getTransaction() call org.springframework.orm.jpa.JpaDialect.beginTransaction(EntityManager,TransactionDefinition) call org.springframework.orm.jpa.JpaDialect.beginTransaction(EntityManager,TransactionDefinition) call org.springframework.orm.jpa.JpaDialect.beginTransaction(EntityManager,TransactionDefinition) call org.springframework.orm.jpa.JpaDialect.beginTransaction(EntityManager,TransactionDefinition) call org.springframework.orm.jpa.JpaDialect.beginTransaction(EntityManager,TransactionDefinition) OptimisticLockException public public decl_stmt OptimisticLockException = new call JpaDialect.translateExceptionIfPossible() call JpaDialect.translateExceptionIfPossible() call JpaDialect.translateExceptionIfPossible() call JpaDialect.translateExceptionIfPossible() call JpaDialect.translateExceptionIfPossible()