org.springframework.jca.cci javax.resource.ResourceException import javax.resource.cci.Connection import javax.resource.cci.ConnectionFactory import javax.resource.cci.Interaction import javax.resource.cci.InteractionSpec import javax.resource.cci.LocalTransaction import javax.resource.cci.Record import org.junit.Test import org.springframework.dao.DataRetrievalFailureException import org.springframework.jca.cci.connection.CciLocalTransactionManager import org.springframework.jca.cci.core.CciTemplate import org.springframework.transaction.TransactionStatus import org.springframework.transaction.support.TransactionCallback import org.springframework.transaction.support.TransactionCallbackWithoutResult import org.springframework.transaction.support.TransactionSynchronizationManager import org.springframework.transaction.support.TransactionTemplate import static static org.junit.Assert.* import static static org.mockito.BDDMockito.* import class org.springframework.jca.cci.CciLocalTransactionTests CciLocalTransactionManager ConnectionFactory TransactionTemplate InteractionSpec LocalTransaction Record Connection Interaction CciTemplate public public throws decl_stmt ConnectionFactory final final = decl_stmt sun.rmi.transport.Connection = decl_stmt Interaction = decl_stmt LocalTransaction = decl_stmt Record final final = decl_stmt InteractionSpec final final = call ConnectionFactory.getConnection() call ConnectionFactory.getConnection() call ConnectionFactory.getConnection() call ConnectionFactory.getConnection() call ConnectionFactory.getConnection() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.createInteraction() call Connection.createInteraction() call Connection.createInteraction() call Connection.createInteraction() call Connection.createInteraction() call Interaction.execute() call Interaction.execute() call Interaction.execute() call Interaction.execute() call Interaction.execute() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.getLocalTransaction() decl_stmt org.springframework.jca.cci.connection.CciLocalTransactionManager = new call org.springframework.jca.cci.connection.CciLocalTransactionManager.setConnectionFactory(ConnectionFactory) call org.springframework.jca.cci.connection.CciLocalTransactionManager.setConnectionFactory(ConnectionFactory) call org.springframework.jca.cci.connection.CciLocalTransactionManager.setConnectionFactory(ConnectionFactory) call org.springframework.jca.cci.connection.CciLocalTransactionManager.setConnectionFactory(ConnectionFactory) call org.springframework.jca.cci.connection.CciLocalTransactionManager.setConnectionFactory(ConnectionFactory) decl_stmt org.springframework.transaction.support.TransactionTemplate = new call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) new protected protected decl_stmt org.springframework.jca.cci.core.CciTemplate = new call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) CciTemplate protected protected decl_stmt org.springframework.jca.cci.core.CciTemplate = new call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) CciLocalTransactionManager ConnectionFactory TransactionTemplate InteractionSpec LocalTransaction Record Connection Interaction CciTemplate public public throws decl_stmt ConnectionFactory final final = decl_stmt sun.rmi.transport.Connection = decl_stmt Interaction = decl_stmt LocalTransaction = decl_stmt Record final final = decl_stmt InteractionSpec final final = call ConnectionFactory.getConnection() call ConnectionFactory.getConnection() call ConnectionFactory.getConnection() call ConnectionFactory.getConnection() call ConnectionFactory.getConnection() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.createInteraction() call Connection.createInteraction() call Connection.createInteraction() call Connection.createInteraction() call Connection.createInteraction() call Interaction.execute() call Interaction.execute() call Interaction.execute() call Interaction.execute() call Interaction.execute() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.getLocalTransaction() call Connection.getLocalTransaction() decl_stmt org.springframework.jca.cci.connection.CciLocalTransactionManager = new call org.springframework.jca.cci.connection.CciLocalTransactionManager.setConnectionFactory(ConnectionFactory) call org.springframework.jca.cci.connection.CciLocalTransactionManager.setConnectionFactory(ConnectionFactory) call org.springframework.jca.cci.connection.CciLocalTransactionManager.setConnectionFactory(ConnectionFactory) call org.springframework.jca.cci.connection.CciLocalTransactionManager.setConnectionFactory(ConnectionFactory) call org.springframework.jca.cci.connection.CciLocalTransactionManager.setConnectionFactory(ConnectionFactory) decl_stmt org.springframework.transaction.support.TransactionTemplate = new try call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) call org.springframework.transaction.support.TransactionTemplate.execute(TransactionCallback) new < public public decl_stmt org.springframework.jca.cci.core.CciTemplate = new call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) throw new catch CciTemplate public public decl_stmt org.springframework.jca.cci.core.CciTemplate = new call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) call org.springframework.jca.cci.core.CciTemplate.execute(ConnectionCallback) throw new