Spring.Messaging.Nms.Connections System using System.Data using Apache.NMS using Common.Logging using Spring.Messaging.Nms.Core using Spring.Objects.Factory using Spring.Transaction using Spring.Transaction.Support using class Spring.Messaging.Nms.Connections.NmsTransactionManager super super AbstractPlatformTransactionManager super IResourceTransactionManager super IInitializingObject IConnectionFactory ILog return = public public if == throw new return MessageTransactionObject protected override protected override decl_stmt MessageTransactionObject = new = return MessageTransactionObject ISession int IConnection protected override protected override if != throw new decl_stmt MessageTransactionObject = decl_stmt Spring.Messaging.Ems.Common.IConnection = decl_stmt Spring.Messaging.Ems.Common.ISession = try = = if + + + + = new = decl_stmt int = if != = catch if != try call ISession.Close() call ISession.Close() call ISession.Close() call ISession.Close() call ISession.Close() catch if != try call Spring.Messaging.Ems.Common.IConnection.Close() call Spring.Messaging.Ems.Common.IConnection.Close() call Spring.Messaging.Ems.Common.IConnection.Close() call Spring.Messaging.Ems.Common.IConnection.Close() call Spring.Messaging.Ems.Common.IConnection.Close() catch throw new MessageTransactionObject protected override protected override decl_stmt MessageTransactionObject = = return NmsResourceHolder protected override protected override decl_stmt Spring.Messaging.Nms.Connections.NmsResourceHolder = MessageTransactionObject ISession protected override protected override decl_stmt MessageTransactionObject = decl_stmt Spring.Messaging.Ems.Common.ISession = call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() try if call ILog.Debug() call ILog.Debug() call ILog.Debug() call ILog.Debug() call ILog.Debug() + + call Spring.Messaging.Ems.Common.ISession.Commit() call Spring.Messaging.Ems.Common.ISession.Commit() call Spring.Messaging.Ems.Common.ISession.Commit() call Spring.Messaging.Ems.Common.ISession.Commit() call Spring.Messaging.Ems.Common.ISession.Commit() catch throw new MessageTransactionObject ISession protected override protected override decl_stmt MessageTransactionObject = decl_stmt Spring.Messaging.Ems.Common.ISession = call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() try if call ILog.Debug() call ILog.Debug() call ILog.Debug() call ILog.Debug() call ILog.Debug() + + call Spring.Messaging.Ems.Common.ISession.Rollback() call Spring.Messaging.Ems.Common.ISession.Rollback() call Spring.Messaging.Ems.Common.ISession.Rollback() call Spring.Messaging.Ems.Common.ISession.Rollback() call Spring.Messaging.Ems.Common.ISession.Rollback() catch throw new MessageTransactionObject protected override protected override decl_stmt MessageTransactionObject = = MessageTransactionObject protected override protected override decl_stmt MessageTransactionObject = call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() call MessageTransactionObject.ResourceHolder() MessageTransactionObject protected override protected override decl_stmt MessageTransactionObject = as if != return != return protected virtual protected virtual return protected virtual protected virtual return return = return